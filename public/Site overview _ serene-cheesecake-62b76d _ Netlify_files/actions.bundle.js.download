"use strict";(()=>{(self.webpackChunk=self.webpackChunk||[]).push([[8107],{10249:(ft,z,t)=>{t.d(z,{Eb:()=>S,FW:()=>m,d2:()=>p,o3:()=>I,rI:()=>E,so:()=>y});var i=t(18432),F=t(7442),f=t(941);const P=(0,i.P)("accountCommitters"),y=(0,i.x)("accountCommitters",P);function I(r,a){const l=r.accountCommitters.getIn(["pages",a,"ids"]);return l==null?void 0:l.map(o=>r.accountCommitters.getIn(["entities",o]))}function m(r){return(0,f.p5)((a,l,o)=>o.accountCommitters(r.get("id"),{}).then(u=>{a(P.accountCommittersSuccess(r.get("slug"),u.data))}))}function p(r,a,l){return(0,f.p5)((o,u,n)=>n.createCommitter(r.get("id"),a,l).then(e=>{o(m(r))}))}function E(r,a,l,o,u){return(0,f.p5)((n,e,d)=>d.updateCommitter(a.get("id"),l,o,u).then(c=>{F.iND.appCommitterMerged({accountId:a.get("id")||"",committerId:l,memberId:o,type:o?"merge":"unmerge",userId:r}),n(m(a))}))}function S(r,a){return(0,f.p5)((l,o,u)=>u.deleteCommitter(r.get("id"),a).then(n=>{l(m(r))}))}},2630:(ft,z,t)=>{t.d(z,{Ah:()=>J,Kw:()=>e,Lj:()=>_,O_:()=>L,PM:()=>u,SM:()=>c,ad:()=>n,c_:()=>O,cg:()=>d,el:()=>s,hS:()=>K,j_:()=>g});var i=t(90046),F=t.n(i),f=t(19271),P=t(18643),y=t(18432),I=t(77962),m=t(91800),p=t(941),E=t(60653);const S=(0,y.P)("accountMembers"),r="INVITE_CLEAR_FAILURES",a="INVITE_FAILURE",l=(0,P.Z)(r),o=(0,P.Z)(a),u=(0,y.x)("accountMembers",S,{handler:(M,h)=>{switch(h.type){case r:return M.setIn(["inviteErrors"],(0,i.List)());case a:{const H=M.get("inviteErrors")||(0,i.List)();return M.setIn(["inviteErrors"],H.push(h.payload))}default:return null}}});function n(M,h){const H=M.accountMembers.getIn(["pages",h,"ids"]);return H&&H.map(rt=>M.accountMembers.getIn(["entities",rt])).sort((rt,ct)=>{const gt=tt=>tt.get("pending")===!0;if(gt(rt)&&!gt(ct))return 1;if(!gt(rt)&&gt(ct))return-1;const Ot=new Date(rt.get("updated_at")),x=new Date(ct.get("updated_at"));return Ot<x?1:-1})}function e(M,h){return M.accountMembers.getIn(["entities",h])}function d(M,h){return M.accountMembers.getIn(["pages",h])}function c(M){return M.accountMembers.getIn(["inviteErrors"])}function s(M,h={}){return(0,p.p5)((H,rt,ct)=>ct.accountMembers(M.get("slug"),h).then(gt=>H(S.accountMembersSuccess(M.get("slug"),gt.data,gt.pagination))))}function _(M,h){return(0,p.p5)((H,rt,ct)=>ct.accountMember(M.get("slug"),h).then(gt=>H(S.accountMemberSuccess(gt.data))))}function g(M,{emails:h,role:H,site_ids:rt,site_access:ct,build_id:gt},Ot){return(0,p.p5)((x,tt,_t)=>(x(l()),Promise.all(h.map(W=>_t.inviteAccountMember(M.get("slug"),{email:W,role:H,site_ids:rt,site_access:ct,build_id:gt}).catch(Q=>{x(o((0,i.fromJS)({email:W,error:Q.message})))}))).finally(()=>{x(s(M)),x((0,m.Mx)(M.get("slug")));let W=(0,I.l_)(M,"members");Ot&&(W+="?addOwner=true"),x((0,f.VF)(W))})))}function O(M,h){return(0,p.p5)((H,rt,ct)=>ct.inviteAccountMember(M.get("slug"),{email:h.get("email"),role:h.get("role"),site_ids:h.get("site_ids"),site_access:h.get("site_access"),build_id:h.get("build_id")}).finally(()=>{H(s(M)),H((0,m.Mx)(M.get("slug")))}))}function L(){return l()}function J(M,h){return(0,p.p5)((H,rt,ct)=>ct.removeAccountMember(M.get("slug"),h.get("id")).then(()=>{(0,E.HF)(rt()).get("id")===h.get("id")?H((0,m.UU)(M)):H(s(M)),H((0,m.Mx)(M.get("slug")))}))}function K(M,h,{role:H,site_access:rt,site_ids:ct}){return(0,p.p5)((gt,Ot,x)=>x.updateAccountMember(M.get("slug"),h.get("id"),{role:H,site_access:rt,site_ids:ct}).then(tt=>gt(s(M))))}},99695:(ft,z,t)=>{t.d(z,{L6:()=>y,TL:()=>P,V8:()=>I});var i=t(18432),F=t(941);const f=(0,i.P)("accountReceipts"),P=(0,i.x)("accountReceipts",f);function y(m,p){const E=p&&m.accountReceipts.getIn(["pages",p.get("slug"),"ids"]);return E&&E.map(S=>m.accountReceipts.getIn(["entities",S])).filter(S=>S.get("html_stored"))}function I(m){return(0,F.p5)((p,E,S)=>S.accountReceipts(m.get("slug")).then(r=>p(f.accountReceiptsSuccess(m.get("slug"),r.data,r.pagination))))}},45473:(ft,z,t)=>{t.d(z,{Du:()=>p,Mr:()=>P,uK:()=>y,xU:()=>m});var i=t(18432),F=t(941);const f=(0,i.P)("accountReviewerMembers"),P=(0,i.x)("accountReviewerMembers",f);function y(E,S={}){const r=E.get("slug");return(0,F.p5)((a,l,o)=>o.accountReviewerMembers(r,S).then(u=>a(f.accountReviewerMembersSuccess(r,u.data,u.pagination))))}function I(E,S){const r=E.get("pending"),a=S.get("pending");return r===a?new Date(S.get("created_at")).getTime()-new Date(E.get("created_at")).getTime():a?1:r?-1:0}function m(E,S){const r=E==null?void 0:E.accountReviewerMembers.getIn(["pages",S,"ids"]);return r&&r.map(a=>E.accountReviewerMembers.getIn(["entities",a])).sort(I)}function p(E,S){return E.accountReviewerMembers.getIn(["pages",S])}},97536:(ft,z,t)=>{t.d(z,{$K:()=>e,KB:()=>n,Q_:()=>l,Vx:()=>a,ag:()=>s,iX:()=>c,ol:()=>d});var i=t(90046),F=t.n(i),f=t(18643),P=t(18432),y=t(2630),I=t(941);const m=(0,P.P)("accountReviewers"),p="REVIEWER_SUCCESS",E="REVIEWER_FAILURE",S=(0,f.Z)(p),r=(0,f.Z)(E);function a(_){const g=_.get("slug");return(0,I.p5)((O,L,J)=>(O(m.accountReviewersRequest(g)),J.accountReviewers(g).then(K=>{O(m.accountReviewersSuccess(g,K.data,K.pagination)),O(S({}))})))}const l=(0,P.x)("accountReviewers",m,{handler:(_,g)=>{switch(g.type){case p:return _.setIn(["error"],(0,i.fromJS)(g.payload));case E:return _.setIn(["error"],(0,i.fromJS)(g.payload));default:return null}}});function o(_,g){return _.accountReviewers.getIn(["entities",g])}function u(_,g){const O=_.get("state"),L=g.get("state");return O===L?new Date(g.get("created_at")).getTime()-new Date(_.get("created_at")).getTime():L==="pending"?1:O==="pending"?-1:0}function n(_,g){const O=_.accountReviewers.getIn(["pages",g,"ids"]);return O&&O.map(L=>_.accountReviewers.getIn(["entities",L])).sort(u)}function e(_){return _.accountReviewers.getIn(["error"])}function d(_,g,{state:O,site_access:L="all"}){const J=g.get("id");return(0,I.p5)((K,M,h)=>h.updateAccountReviewer(_.get("slug"),J,{state:O,site_access:L}).then(()=>K(a(_))).catch(H=>K(r({reviewerId:J,error:H}))))}function c(_,g,{role:O="Collaborator"}){const L=g.get("id");return(0,I.p5)((J,K,M)=>M.promoteAccountReviewer(_.get("slug"),L,{role:O}).then(()=>{J((0,y.el)(_)),J(a(_))}).catch(h=>J(r({reviewerId:L,error:h}))))}function s(_,g){const O=g.get("id");return(0,I.p5)((L,J,K)=>K.removeAccountReviewer(_.get("slug"),O).then(()=>{L(a(_))}).catch(M=>L(r({reviewerId:O,error:M}))))}},91800:(ft,z,t)=>{t.d(z,{Gj:()=>b,K3:()=>mt,Ko:()=>Et,L3:()=>X,MI:()=>qt,Mx:()=>at,O3:()=>ot,T$:()=>St,Tq:()=>Lt,UU:()=>vt,Wq:()=>B,_Z:()=>Wt,bk:()=>$,cM:()=>ut,i6:()=>Mt,my:()=>q,nP:()=>Bt,nw:()=>Rt,o1:()=>v,ok:()=>st,qL:()=>pt,rp:()=>lt,s5:()=>yt,sG:()=>Z,tm:()=>Pt,uW:()=>At,vP:()=>k,yj:()=>R});var i=t(90046),F=t.n(i),f=t(19271),P=t(18643),y=t(18432),I=t(7442),m=t(82048),p=t(98814),E=t(63851),S=t(72746),r=t(46408),a=t(68854),l=t(54856),o=t(13287),u=t(941),n=t(60653),e=t(52968),d=t(34571),c=t(38751),s=t(93716);const _="ACCOUNT_TYPES_SUCCESS",g="ACCOUNT_COMPLIANCE_SUCCESS",O="ACCOUNT_UPGRADE_PRO",L="ACCOUNT_UPGRADE_BUSINESS",J="SET_SELECTED_ACCOUNT",K="SET_REQUESTED_ACCOUNT_TYPE",M="ACCOUNT_BANDWIDTH_USAGE_SUCCESS",h="ACCOUNT_BANDWIDTH_USAGE_PER_DOMAIN_SUCCESS",H="ACCOUNT_BUILD_USAGE_SUCCESS",rt="ACCOUNT_CREATOR_SUCCESS",ct="ACCOUNT_EDGE_FUNCTION_BANDWIDTH_USAGE_SUCCESS",gt="ACCOUNT_FIREWALL_RULE_SET_SUCCESS",Ot=(0,y.P)("accounts"),x=(0,P.Z)(gt,(C,T)=>({id:C,firewall_rule_set:T})),tt=(0,P.Z)(_,C=>C),_t=(0,P.Z)(g,(C,T)=>({id:C,compliance:T})),W=(0,P.Z)(M,(C,T)=>({id:C.get("id"),bandwidth:T})),Q=(0,P.Z)(ct,(C,T)=>({id:C.get("id"),edgeFunctions:T})),w=(0,P.Z)(h,(C,T)=>({id:C,bandwidth:T})),V=(0,P.Z)(H,(C,T)=>({id:C.get("id"),status:T}));function et(C){return(0,u.p5)((T,dt,Ct)=>Ct.accountBandwidth(C.get("slug")).then(Dt=>{T(W(C,Dt.data))}))}function N(C){return(0,u.p5)((T,dt,Ct)=>Ct.accountEdgeFunctionsUsage(C.get("slug")).then(Dt=>{T(Q(C,Dt.data))}))}function R(C,T){return(0,u.p5)((dt,Ct,Dt)=>Dt.accountBandwidthRanking(C,T).then(Ut=>{dt(w(C,Ut.data))}))}function U(C){return(0,u.p5)((T,dt,Ct)=>Ct.accountBuildStatus(C.get("slug")).then(Dt=>{T(V(C,Dt.data))}))}function G(C){return(T,dt)=>{T(et(C)),T(U(C)),T(N(C))}}function k(){return(0,u.p5)((C,T,dt)=>dt.accounts().then(Ct=>{C(Ot.accountsSuccess("accounts",Ct.data,Ct.pagination)),l.Z.setContext("accounts",Ct.data.map(Dt=>(0,S.M)(Dt)))}))}function at(C){return(0,u.p5)((T,dt,Ct)=>Ct.account(C).then(Dt=>T(Ot.accountSuccess(Dt.data))).then(Dt=>{var Ut;const te=(Ut=Dt==null?void 0:Dt.payload)==null?void 0:Ut.id;return T(j({accountId:te,slug:C})),Dt}).catch(Dt=>T(Ot.accountFailure(C,Dt))))}function Mt(C){return(T,dt)=>{T(at(C.get("slug"))).then(()=>{T(G(C))})}}function Et(){return(0,u.p5)((C,T,dt)=>dt.accountTypes().then(Ct=>C(tt(Ct.data))))}function j({accountId:C,slug:T}){return(0,u.p5)((dt,Ct,Dt)=>Dt.accountCompliance(T).then(Ut=>dt(_t(C,Ut.data))))}function ot(C){return(0,u.p5)((T,dt,Ct)=>Ct.accountFirewallRuleSet(C).then(Dt=>{T(x(C,Dt.data))}).catch(Dt=>{(Dt==null?void 0:Dt.code)===404&&T(x(C,{published:{default:"allow",rules:[]},unpublished:{default:"allow",rules:[]}}))}))}function St(C,T){return(0,u.p5)((dt,Ct,Dt)=>Dt.updateAccountFirewallRuleSet(C,T).then(()=>{dt(ot(C))}))}function v(C){return(0,u.p5)((T,dt,Ct)=>Ct.createAccount(C).then(({data:Dt})=>{T(Ot.accountSuccess(Dt)),C.transferSite&&T((0,d.GQ)(C.transferSite,(0,i.Map)(Dt))),T(k()),T((0,f.VF)(`/teams/${Dt.slug}`)),T((0,d.KZ)()),T((0,c.L9)({event:"subscription_created",category:"subscription",label:`Team plan ${Dt.type_name}`}))}))}function Z(C,T){return(0,u.p5)((dt,Ct,Dt)=>Dt.updateAccount(C.get("id"),T).then(({data:Ut})=>{var te;const{logo:oe}=T;if(oe!==void 0&&Dt.updateAccountLogo(C.get("id"),oe).catch(jt=>new E.Z(jt)),dt((0,d.Go)()),dt(Ot.accountSuccess(Ut)),C.get("type_slug")===r.iK&&Ut.type_slug===r.d0&&Ut.type_id===T.type_id){const jt=(0,a.St)("upgradePro")?"www":"app",ne=(0,a.St)("gaID")?(0,a.St)("gaID"):"";I.iND.appFlowUpgradePro({category:"flow",label:"Team upgraded to Pro",accountId:C.get("id"),gaID:ne||"",source:jt,trialRequested:!!T.free_trial}),(0,a.St)("upgradePro")&&(0,a.lD)("upgradePro")}if((C.get("type_slug")===r.iK||C.get("type_slug").match(/pro/))&&Ut.type_slug===r.HX&&Ut.type_id===T.type_id){const jt=(0,a.St)("upgradeBusiness")?"www":"app",ne=(0,a.St)("gaID")?(0,a.St)("gaID"):"";I.iND.appFlowUpgradeBusiness({category:"flow",label:"Team upgraded to Business",accountId:C.get("id"),gaID:ne||"",source:jt}),(0,a.St)("upgradeBusiness")&&(0,a.lD)("upgradeBusiness")}if(C.get("type_slug")===r.s5&&(Ut.type_slug===r.iK||Ut.type_slug===r.d0)&&Ut.type_id===T.type_id&&I.iND.appEnterpriseTrialDowngrade({newPlanTypeSlug:Ut.type_slug,daysLeftOnTrial:(0,r.OF)(C)}),C.get("type_slug")!==r.s5&&Ut.type_slug===r.s5&&Ut.type_id===T.type_id){const jt=(0,n.HF)(Ct()),ne=C.get("name"),ue=(jt==null?void 0:jt.get("fullname"))||((te=(0,e.DY)(Ct(),C))==null?void 0:te.getIn(["data","name"],"Unknown")),{firstname:ge,lastname:Ee}=(0,m.DY)(ue),{sendContactFormData:Se}=(0,p.Z)({hubspotformid:"5991acbb-d5d5-446a-b6e0-15b29516ea88"});Se({firstname:ge,lastname:Ee,email:jt==null?void 0:jt.get("email"),team:ne})}const se=C.get("slug"),{slug:ae}=Ut;se!==ae&&dt((0,s.Ee)(document.location.pathname.replace(`/teams/${se}/`,`/teams/${ae}/`)))}))}function st(C,T){return(0,u.p5)((dt,Ct,Dt)=>Dt.updateAccount(C.get("id"),T).then(()=>{const{logo:Ut}=T;if(Ut!==void 0)return Dt.updateAccountLogo(C.get("id"),Ut).then(()=>{dt(at(C.get("slug")))}).catch(te=>new E.Z(te))}))}function yt(C){return(0,u.p5)((T,dt,Ct)=>Ct.deleteAccountLogo(C.get("id")).then(()=>{T(at(C.get("slug")))}).catch(Dt=>new E.Z(Dt)))}function Pt(C){return I.iND.appAccountDelete({accountId:C==null?void 0:C.get("id"),accountSlug:C==null?void 0:C.get("slug")}),(0,u.p5)((T,dt,Ct)=>Ct.deleteAccount(C.get("id")).then(Dt=>T(vt(C))))}function vt(C){return(T,dt)=>{T((0,d.Go)()),T(Kt()),T(k()).then(()=>T((0,s.Ee)("/")))}}function Rt(C){return(0,a.D$)("nf-team",C),{type:J,slug:C}}function Kt(){return Rt(null)}function Lt(C,T=!1,dt=!1){return{type:K,payload:{accountTypeRequested:C,isNewAccountTypeRequested:T,isTrialAccountTypeRequested:dt}}}function Wt(){return Lt(null)}const Zt=(C,T)=>[C.get?C.get("id"):C.id,T].join("-"),qt=(0,y.x)("accounts",Ot,{key:"slug",handler:(C,T)=>{switch(T.type){case _:return C.set("accountTypes",(0,i.fromJS)(T.payload));case J:return C.set("selected",T.slug);case K:return C.set("accountTypeRequested",T.payload.accountTypeRequested).set("isNewAccountTypeRequested",T.payload.isNewAccountTypeRequested).set("isTrialAccountTypeRequested",T.payload.isTrialAccountTypeRequested);case M:return C.set(Zt(T.payload,"bandwidth"),(0,i.fromJS)(T.payload.bandwidth));case h:return C.set(Zt(T.payload,"bandwidthUsagePerDomain"),(0,i.fromJS)(T.payload.bandwidth));case gt:return C.set(Zt(T.payload,"firewall_rule_set"),(0,i.fromJS)(T.payload.firewall_rule_set));case g:return C.set(Zt(T.payload,"compliance"),(0,i.fromJS)(zt(T.payload.compliance)));case rt:return C.set(Zt(T.payload,"creator"),(0,i.fromJS)(T.payload));case O:return C.set("upgradePro",(0,i.fromJS)(T.payload.id));case H:return C.set(Zt(T.payload,"build_minutes"),(0,i.fromJS)({used:T.payload.status.minutes?T.payload.status.minutes.current:T.payload.status.minutes_used}));case ct:return C.set(Zt(T.payload,"edge_functions"),(0,i.fromJS)(T.payload.edgeFunctions));default:return null}}});function $(C,T){let dt=C.accounts.getIn(["entities",T]);return dt?((0,o.F0)(dt)&&(dt=dt.merge({user_capabilities:{billing:dt.getIn(["user_capabilities","billing"])}})),dt=dt.mergeIn(["capabilities"],Tt(C,dt)),dt=dt.mergeIn(["compliance"],Jt(C,dt.get("id"))),dt):null}function X(C){const T=C.accounts.getIn(["pages","accounts","ids"]),dt=T&&T.map(Ct=>$(C,Ct));return dt&&(0,i.List)(dt.sort((Ct,Dt)=>Ct.get("name").localeCompare(Dt.get("name"))))}function ut(C,T){return C.accounts.getIn(["entities",T.get("slug"),"error"])}function lt(C){const T=C.user,dt=X(C),Ct=T==null?void 0:T.get("preferred_account_id"),Dt=dt==null?void 0:dt.find(Ut=>(Ut==null?void 0:Ut.get("id"))===Ct);return Dt||T&&dt&&(dt.find(Ut=>Ut?Ut.get("default")&&(Ut==null?void 0:Ut.getIn(["owner_ids",0]))===T.get("id"):!1)||dt.first())}function q(C){return C.accounts.get("accountTypeRequested")}function B(C){return C.accounts.get("isNewAccountTypeRequested")}function b(C){return C.accounts.get("isTrialAccountTypeRequested")}function pt(C){return C.accounts.get("accountTypes")}function mt(C,T){return C.accounts.get(Zt(T,"firewall_rule_set"))}function At(C){const T=C.accounts.get("selected")||(0,a.le)("nf-team");return $(C,T)||lt(C)}function Tt(C,T){const dt=C.accounts.get(Zt(T,"bandwidth")),Ct=C.accounts.get(Zt(T,"build_minutes")),Dt=C.accounts.get(Zt(T,"edge_functions"));return dt&&Ct&&(0,i.Map)({period_start_date:dt.get("period_start_date"),period_end_date:dt.get("period_end_date"),last_updated_at:dt.get("last_updated_at"),bandwidth:dt,build_minutes:Ct.set("included",T.getIn(["capabilities","build_minutes","included"])),edge_functions:Dt})}function Bt(C,T){var dt;return(dt=C.accounts)==null?void 0:dt.get(Zt({id:T},"bandwidthUsagePerDomain"))}const zt=C=>((!C||C.private_corp_repos.in_compliance!==!1)&&(C.private_corp_repos.in_compliance=!0),C);function Jt(C,T){var dt;return(dt=C.accounts)==null?void 0:dt.get(Zt({id:T},"compliance"))}},23979:(ft,z,t)=>{t.d(z,{Dc:()=>M,Ji:()=>h,PO:()=>Ot,Pc:()=>tt,Te:()=>gt,Tf:()=>G,Wo:()=>U,Ww:()=>N,XF:()=>at,Z$:()=>w,_$:()=>j,bc:()=>V,co:()=>St,gg:()=>R,lW:()=>_t,mE:()=>Q,mq:()=>ot,nV:()=>et,p_:()=>Mt,wi:()=>H});var i=t(90046),F=t.n(i),f=t(18643),P=t(7857),y=t(35037),I=t(941),m=t(34571);const p="ANALYTICS_METRIC_SUCCESS",E="ANALYTICS_METRIC_FETCHING_DONE",S="ANALYTICS_METRIC_FETCHING_STARTED",r="pageviews",a="pageviews-summary",l="unique-visitors",o="unique-visitors-summary",u="top-locations",n="top-sources",e="top-pages",d="bandwidth-used",c="bandwidth-used-summary",s="not-found",_={resolution:"day",days:30};let g=30;const O=(0,f.Z)(p,(v,Z,st,{data:yt})=>({metric:v,siteId:Z.get("id"),period:st,data:yt})),L=(0,f.Z)(E,(v,Z)=>({metric:v,siteId:Z.get("id")})),J=(0,f.Z)(S,(v,Z)=>({metric:v,siteId:Z.get("id")}));let K;function M(v){const Z=v.get("id");return(0,I.p5)((st,yt,Pt)=>Pt.enableAnalytics(Z).then(()=>st((0,m.EQ)(v.get("name")))).then(vt=>st((0,m.ZO)(vt))))}function h(v){const Z=v.get("id"),st=v.get("analytics_instance_id");return(0,I.p5)((yt,Pt,vt)=>st?vt.deleteAnalytics(Z,st).then(()=>yt((0,m.EQ)(v.get("name")))):Promise.resolve())}function H(v){return(Z,st)=>{const{config:yt}=st();return K=K||new y.ZP(yt),v(Z,st,K)}}function rt(v="day",Z=30,st=0,yt){const Pt=new Date;return v==="hour"?yt==="uniqueVisitors"?{from:(0,P.YD)(Pt,1+st).getTime(),to:(0,P.YD)(Pt,st).getTime()-36e5,resolution:v,minusOffsetDays:st}:{from:(0,P.YD)(Pt,1+st).getTime(),to:(0,P.YD)(Pt,st).getTime(),resolution:v,minusOffsetDays:st}:{from:(0,P.b7)((0,P.YD)(Pt,Z+st)).getTime(),to:st?(0,P.iX)((0,P.YD)(Pt,st)).getTime():Pt.getTime(),resolution:v,minusOffsetDays:st}}function ct(v="day",Z=30,st=0,yt){return Z===7?{period:rt(v,Z,st),periodByRange:rt("range",Z,st)}:Z===1?{period:rt(v,24,st,yt),periodByRange:rt("range",Z,st)}:{period:rt(v,Z,st),periodByRange:rt("range",Z,st)}}function gt(v,{resolution:Z,days:st,minusOffsetDays:yt}=_){const{period:Pt,periodByRange:vt}=ct(Z,st,yt);return g=st,H((Rt,Kt,Lt)=>Promise.all([Rt(J(a,v)),Rt(J(r,v)),Lt.pageviews(v.get("id"),Pt).then(Wt=>Rt(O(r,v,Pt,Wt))),Lt.pageviews(v.get("id"),vt).then(Wt=>Rt(O(a,v,Pt,Wt)))]).then(()=>Rt(L(r,v))).then(()=>Rt(L(a,v))))}function Ot(v,Z){return v.analytics.get(`${Z.get("id")}-${r}`)&&v.analytics.get(`${Z.get("id")}-${r}`).toJS()}function x(v,Z){return v.analytics.get(`${Z.get("id")}-${a}`)&&v.analytics.get(`${Z.get("id")}-${a}`).toJS()}function tt(v,{resolution:Z,days:st,minusOffsetDays:yt=0}=_){const{period:Pt,periodByRange:vt}=ct(Z,st,yt,"uniqueVisitors");return g=st,H((Rt,Kt,Lt)=>Promise.all([Rt(J(o,v)),Rt(J(l,v)),Lt.uniqueVisitors(v.get("id"),Pt).then(Wt=>Rt(O(l,v,Pt,Wt))),Lt.uniqueVisitors(v.get("id"),vt).then(Wt=>Rt(O(o,v,vt,Wt)))]).then(()=>Rt(L(l,v))).then(()=>Rt(L(o,v))))}function _t(v,Z){return v.analytics.get(`${Z.get("id")}-${l}`)&&v.analytics.get(`${Z.get("id")}-${l}`).toJS()}function W(v,Z){return v.analytics.get(`${Z.get("id")}-${o}`)&&v.analytics.get(`${Z.get("id")}-${o}`).toJS()}function Q(v,{resolution:Z,days:st,minusOffsetDays:yt=0}=_){const{period:Pt}=ct(Z,st,yt);return H((vt,Rt,Kt)=>(vt(J(u,v)),Kt.topLocations(v.get("id"),Pt).then(Lt=>vt(O(u,v,Pt,Lt))).then(()=>vt(L(u,v)))))}function w(v,Z){return v.analytics.get(`${Z.get("id")}-${u}`)&&v.analytics.get(`${Z.get("id")}-${u}`).toJS()}function V(v,{resolution:Z,days:st,minusOffsetDays:yt=0}=_){const{period:Pt}=ct(Z,st,yt);return H((vt,Rt,Kt)=>(vt(J(n,v)),Kt.topSources(v.get("id"),Pt).then(Lt=>vt(O(n,v,Pt,Lt))).then(()=>vt(L(n,v)))))}function et(v,Z){return v.analytics.get(`${Z.get("id")}-${n}`)&&v.analytics.get(`${Z.get("id")}-${n}`).toJS()}function N(v,{resolution:Z,days:st,minusOffsetDays:yt=0}=_){const{period:Pt}=ct(Z,st,yt);return H((vt,Rt,Kt)=>(vt(J(e,v)),Kt.topPages(v.get("id"),Pt).then(Lt=>vt(O(e,v,Pt,Lt))).then(()=>vt(L(e,v)))))}function R(v,Z){return v.analytics.get(`${Z.get("id")}-${e}`)&&v.analytics.get(`${Z.get("id")}-${e}`).toJS()}function U(v,{resolution:Z,days:st,minusOffsetDays:yt=0}=_){const{period:Pt,periodByRange:vt}=ct(Z,st,yt);return g=st,H((Rt,Kt,Lt)=>Promise.all([Rt(J(c,v)),Rt(J(d,v)),Lt.bandwidthUsed(v.get("id"),Pt).then(Wt=>Rt(O(d,v,Pt,Wt))),Lt.bandwidthUsed(v.get("id"),vt).then(Wt=>Rt(O(c,v,vt,Wt)))]).then(()=>Rt(L(d,v))).then(()=>Rt(L(c,v))))}function G(v,Z){return v.analytics.get(`${Z.get("id")}-${d}`)&&v.analytics.get(`${Z.get("id")}-${d}`).toJS()}function k(v,Z){return v.analytics.get(`${Z.get("id")}-${c}`)&&v.analytics.get(`${Z.get("id")}-${c}`).toJS()}function at(v,{resolution:Z,days:st,minusOffsetDays:yt=0}=_){const{period:Pt}=ct(Z,st,yt);return H((vt,Rt,Kt)=>(vt(J(s,v)),Kt.notFound(v.get("id"),Pt).then(Lt=>vt(O(s,v,Pt,Lt))).then(()=>vt(L(s,v)))))}function Mt(v,Z){return v.analytics.get(`${Z.get("id")}-${s}`)&&v.analytics.get(`${Z.get("id")}-${s}`).toJS()}function Et(v,Z=null){return v.reduce((st,yt)=>{const Pt=Z?yt[Z]:yt[1];return st+Pt},0)}function j(){return g}function ot(v,Z){var st;const{data:yt,status:Pt,timePeriod:vt,isFetching:Rt}=x(v,Z)||{},{data:Kt,status:Lt,timePeriod:Wt,isFetching:Zt}=W(v,Z)||{},{data:qt,status:$,timePeriod:X,isFetching:ut}=k(v,Z)||{};return{timePeriod:vt||Wt||X,pageviewSummary:{total:yt&&Et(yt),status:Pt,isFetching:Rt},uniqueVisitorSummary:{total:((st=Kt==null?void 0:Kt[0])==null?void 0:st[1])||0,status:Lt,isFetching:Zt},bandwidthSummary:{total:qt&&Et(qt,"siteBandwidth"),status:$,isFetching:ut}}}const St=(v=(0,i.Map)(),Z)=>{switch(Z.type){case S:return v.setIn([`${Z.payload.siteId}-${Z.payload.metric}`,"isFetching"],!0);case p:return v.set(`${Z.payload.siteId}-${Z.payload.metric}`,(0,i.fromJS)({data:Z.payload.data,timePeriod:{from:Z.payload.period.from,to:Z.payload.period.to,minusOffsetDays:Z.payload.period.minusOffsetDays},status:"current"}));case E:return v.setIn([`${Z.payload.siteId}-${Z.payload.metric}`,"isFetching"],!1);default:return v}}},941:(ft,z,t)=>{t.d(z,{Hx:()=>i.Z,ac:()=>I,oA:()=>E,p5:()=>m,vd:()=>p});var i=t(63851),F=t(13332),f=t(60653),P=t(65628);let y=null;function I(S){const{config:r,user:a}=S;return r&&a&&y&&y.token===a.get("access_token")?y:a?y=new F.Z(r.set("accessToken",a.get("access_token"))):new F.Z(r)}const m=function(){return S=>(r,a)=>{const l=I(a());if(!l)return Promise.reject(new i.Z("No API"));const o=S(r,a,l);return o&&o.catch&&o.catch(u=>((u==null?void 0:u.code)===401&&r((0,f.wq)(u)),u instanceof i.Z?Promise.reject(u):Promise.reject(new i.Z(u))))}}();function p(S){return m((r,a,l)=>(0,P.$_)((o,u,n)=>S(r,a,l,n))(r,a))}function E(S){const r=S instanceof i.Z?S:new i.Z(S);return r==null?void 0:r.toString().replace(/^Error:\s?/,"")}},6790:(ft,z,t)=>{t.d(z,{H6:()=>I,KL:()=>a,KM:()=>n,UG:()=>y,W3:()=>p,Xo:()=>e,Yn:()=>S,bU:()=>u,iT:()=>r,li:()=>E,pO:()=>m,rP:()=>P,zJ:()=>l});var i=t(18432),F=t(941);const f=(0,i.P)("applications"),P=(0,i.x)("applications",f,{key:"client_id"});function y(d){return(0,F.p5)((c,s,_)=>_.application(d).then(g=>c(f.applicationSuccess(g.data))))}function I(){return(0,F.p5)((d,c,s)=>s.applications().then(_=>d(f.applicationsSuccess("oauth",_.data,_.pagination))))}function m(d){return(0,F.p5)((c,s,_)=>_.authorizedApplications(d).then(g=>c(f.applicationsSuccess("authorized",g.data,g.pagination))))}function p(d){return(0,F.p5)((c,s,_)=>_.createApplication(d).then(g=>c(I())))}function E(d,c){return(0,F.p5)((s,_,g)=>g.updateApplication(d,c).then(O=>s(f.applicationSuccess(O.data))))}function S(d){return(0,F.p5)((c,s,_)=>_.removeApplication(d).then(g=>c(I())))}function r(d,c){return(0,F.p5)((s,_,g)=>g.revokeAuthorizedApplication(d,c).then(O=>s(m(c))))}function a(d,c,s){return(0,F.p5)((_,g,O)=>O.createPersonalToken(d,c,s))}function l(d,c){return d.applications.getIn(["entities",c])}function o(d){const c=d.applications.getIn(["pages","oauth","ids"]);return c&&c.map(s=>l(d,s))}function u(d){const c=d.applications.getIn(["pages","authorized","ids"]);return c&&c.map(s=>l(d,s))}function n(d){const c=o(d);return c&&c.filter(s=>!s.get("personal"))}function e(d){const c=o(d);return c&&c.filter(s=>s.get("personal"))}},52194:(ft,z,t)=>{t.d(z,{LW:()=>P,Sy:()=>I,rw:()=>m,sQ:()=>y,yb:()=>p});var i=t(18432),F=t(941);const f=(0,i.P)("authProviders"),P=(0,i.x)("authProviders",f);function y(E){return(0,F.p5)((S,r,a)=>a.authProviders(E.get("id")).then(l=>S(f.authProvidersSuccess(E.get("id"),l.data,l.pagination)),l=>S(f.authProvidersFailure(E.get("id"),l))))}function I(E,S){return(0,F.p5)((r,a,l)=>{const{type:o,apiID:u,apiSecret:n}=S.toJS();return l.createAuthProvider(E.get("id"),o,u,n).then(e=>r(y(E)))})}function m(E,S){return(0,F.p5)((r,a,l)=>l.removeAuthProvider(E.get("id"),S.get("name")).then(o=>r(y(E))))}function p(E,S){const r=E.authProviders.getIn(["pages",S,"ids"]);return r&&r.map(a=>E.authProviders.getIn(["entities",a]))}},60653:(ft,z,t)=>{t.d(z,{$D:()=>tt,A9:()=>ot,B9:()=>v,Bh:()=>Zt,DL:()=>vt,EA:()=>qt,HF:()=>lt,KE:()=>q,Kk:()=>G,Nq:()=>Mt,Ov:()=>N,Qk:()=>H,Sz:()=>st,TX:()=>R,VB:()=>j,Wb:()=>h,Wk:()=>ut,YR:()=>Rt,Yn:()=>Pt,_b:()=>at,c0:()=>k,ek:()=>$,fq:()=>Z,hP:()=>x,k3:()=>Et,ou:()=>w,pH:()=>V,t:()=>Kt,wq:()=>U,xh:()=>et,zj:()=>St});var i=t(90046),F=t.n(i),f=t(19271),P=t(18643),y=t(7442),I=t(16015),m=t(28739),p=t(63851),E=t(82214),S=t(71731),r=t(84525),a=t(14154),l=t(68854),o=t(54856),u=t(40917),n=t(91800),e=t(941),d=t(65628),c=t(87430),s=t(93716);const _="nf-session",g="AUTH_ERROR",O="USER_REQUEST",L="USER_ERROR",J="RESET_PASSWORD_SUCCESS",K="LOGIN_USER",M="UPDATE_USER",h="LOGOUT_USER",H="USER_SIGNUP",rt="USER_SUCCESS",ct="USER_SUCCESS_SHALLOW",gt=(0,P.Z)(J),Ot=(0,P.Z)(H,B=>({user:B}));function x(){try{const B=localStorage.getItem(_);return B&&JSON.parse(B).access_token}catch(B){return console.error("Error parsing data from local storage",B),null}}function tt({reload:B=!1}={}){return(b,pt)=>{const mt=pt(),At=lt(mt);if(At&&!B)return Promise.resolve(At);const Tt=x();return Tt&&(0,E.W8)()?_t(mt.config,Tt).then(Bt=>(Bt.id!==(At==null?void 0:At.get("id"))?b({type:K,payload:Bt}):b({type:M,payload:Bt}),lt(pt()))):Promise.resolve(null)}}function _t(B,b){const pt={access_token:b};return(0,e.ac)({config:B,user:(0,i.Map)(pt)}).user().then(mt=>({...mt.data,...pt}))}function W(B,b){return(0,e.ac)({config:B}).verifyUserByToken(b).then(mt=>{if(mt.data.state==="error")throw new p.Z(mt.data);return mt.data.data.user})}function Q(B,b,pt){const{config:mt}=B();return pt?W(mt,b):_t(mt,b)}function w({token:B,isSignup:b,isReviewer:pt,isVerify:mt,redirect:At}){return(Tt,Bt)=>Q(Bt,B,mt).then(async zt=>{Tt({type:h});const Jt=(zt==null?void 0:zt.access_token)&&zt.access_token!=="use-http-auth-token";if((b||!(0,E.W8)())&&Jt)try{await(0,u.sV)({access_token:zt.access_token})}catch{}Tt(V(zt,b));const C=(0,l.le)("persistedQueryParams")||"";(0,l.e8)("persistedQueryParams");const T=(0,S.VP)(C,Dt=>E.Fh.includes(Dt));b&&!pt&&T.append("new_user",b);const dt=T.toString()&&`?${T.toString()}`,Ct=`${At||""}${dt}`;Tt(Wt(`${Ct}`))}).catch(zt=>Promise.reject(new p.Z("Invalid authorization code")))}function V(B,b,pt,mt){return(At,Tt)=>{if(B=Object.assign({},B),b||B.isSignup?At(Ot(B)):pt||y.iND.appUserLogin({category:"user",label:"User Login"}),delete B.isSignup,pt||B.isUpdate){delete B.isUpdate;const T=(0,l.le)(_);B=(0,i.fromJS)(JSON.parse(T)).mergeDeep((0,i.fromJS)(B)).toJS()}const Bt={access_token:"use-http-auth-token"};(0,l.D$)(_,JSON.stringify(Bt));const{originAllowedToAuth:zt,openerOrigin:Jt}=q();try{!pt&&zt&&(0,u.$f)().then(T=>{Bt.access_control_token=T}).finally(()=>{window.opener.postMessage({type:"LOGIN",payload:JSON.stringify(Bt)},Jt)})}catch(T){console.log("auth \uFE65 loginUser",T)}const C={type:mt||K,payload:{loggedInAt:Date.now(),isSignup:b,isUpdate:pt,...B}};At(C)}}function et(B,b){return(0,e.p5)((pt,mt,At)=>At.fetchEdgeAccessToken(B,b))}function N(B){return(b,pt)=>{(0,u.vH)(),(0,a.K$)(),(0,l.ZL)({exclude:[m.N9,E.d$,I.Nk]}),b({type:h}),b(Wt(B))}}function R(B){return(0,e.p5)((b,pt,mt)=>{const At=lt(pt());return(0,r.jK)(At==null?void 0:At.get("email"))||mt.destroyAccessToken(),o.Z.shutdown(),b(N(B))})}function U(B){return{type:g,payload:B}}function G(B){return(0,e.p5)((b,pt,mt)=>mt.resetPasswordEmail(B))}function k(B,b,pt){return(0,e.p5)((mt,At,Tt)=>Tt.resetPassword(B,b,pt).then(()=>{mt(N("/")),mt(gt({success:!0}))}))}function at(B){return(0,e.p5)((b,pt,mt)=>(b({type:O}),mt.updateUserQuestionnaireTelemetry(B).then(()=>b(tt({reload:!0}))).then(()=>lt(pt()))))}function Mt(B){return(0,e.p5)((b,pt,mt)=>(b({type:O}),mt.updateUser(B).then(async({data:At})=>{const{password:Tt,full_name:Bt,avatar:zt}=B;zt&&await mt.updateUserAvatar(zt).then(()=>{b(tt({reload:!0})),b((0,n.vP)())}).catch(Jt=>new p.Z(Jt)),b(Tt?N(window.location.pathname):V(At,!1,!0,rt)),!Tt&&Bt&&b((0,n.vP)())}).then(()=>lt(pt()))))}function Et(B){return(0,e.p5)((b,pt,mt)=>(b({type:O}),mt.updateUser(B).then(async({data:At})=>{b({type:ct,payload:At})})))}function j(){return(0,e.p5)((B,b,pt)=>pt.deleteUserAvatar().then(()=>{B(tt({reload:!0})),B((0,n.vP)())}).catch(mt=>new p.Z(mt)))}function ot(B,b){return(0,e.p5)((pt,mt,At)=>At.verifyUser(B,b).then(()=>pt(tt({reload:!0}))).catch(Tt=>new p.Z(Tt)))}function St(B,b){return(0,e.p5)((pt,mt,At)=>At.verifySamlUserByToken(B,b).then(Tt=>pt((0,c.e7)(Tt.data.data.user,Tt.data.data.saml_slug))).catch(Tt=>new p.Z(Tt)))}function v(){return y.iND.appUserDelete(),(0,e.p5)((B,b,pt)=>pt.disableUser())}function Z(B="slides",b="closed"){return(pt,mt)=>{const Tt=lt(mt()).get("onboarding_progress")||(0,i.Map)();return pt(Mt({onboarding_progress:Tt.set(B,b)}))}}function st(B){return(b,pt)=>{var mt;const At=lt(pt());let Tt={};return typeof At.getIn(["onboarding_progress","guided_onboarding"])!="string"&&(Tt=(mt=At.getIn(["onboarding_progress","guided_onboarding"],(0,i.Map)()))==null?void 0:mt.toJS()),b(Z("guided_onboarding",{...Tt,...B}))}}function yt(B){return new u.ZP(B.config.toJS())}function Pt({provider:B}){return(0,e.p5)((b,pt,mt)=>((0,u.xw)({url:"/authorizing.html",provider:B}),mt.authLink({provider:B}).then(At=>new Promise((Tt,Bt)=>yt(pt()).open({url:At.data.redirect_uri,provider:B},(zt,Jt)=>zt?Bt(zt):Tt(Jt)))).then(At=>b(tt({reload:!0}))).catch(At=>((0,u.on)(),Promise.reject(At)))))}function vt({provider:B}){return(0,e.p5)((b,pt,mt)=>mt.authUnlink({provider:B}).then(At=>b(tt({reload:!0}))))}function Rt(B){return(0,e.p5)((b,pt,mt)=>{const At=pt(),Tt=lt(At),Bt={provider:"github",redirect:!0,login:!Tt||B.signup||B.forceAuth,...B};return Bt.amnesia?mt.resetPasswordEmail(Bt.email).then(()=>({verify:!0})):new Promise((zt,Jt)=>yt(At).authenticate(Bt,async(C,T)=>{var dt;if(C)return Jt(C);if(T.verify)return zt(T);if(T.redirect_uri)return b(Wt(T.redirect_uri)),zt(T);Bt.login&&T.user&&(b({type:h}),(dt=T==null?void 0:T.user)!=null&&dt.access_token&&T.user.access_token!=="use-http-auth-token"&&(await(0,u.sV)({access_token:T.user.access_token}),T.user.access_token="use-http-auth-token"),b(V(T.user,T.new_user)),b(Wt(Bt.next))),b((0,d.fc)(Bt.provider,T)),y.iND.appSignupGitProviderCreated({userId:Tt==null?void 0:Tt.get("id"),gitProvider:Bt.provider}),zt(T)}))})}function Kt(B){Zt(B)&&(0,l.D9)("next",B)}function Lt(B){const b=typeof B=="string"&&B||sessionStorage.getItem("next")||"/";return Zt(b)?b:"/"}function Wt(B){return B=Lt(B),b=>{b((0,s.Ee)(B))}}function Zt(B){return B&&(B.startsWith("/sso")||B.startsWith("/auth")||B==="/login/email")?(console.log("next redirect is for an auth path. Ignoring to avoid loops",B),!1):!0}function qt(B=null,b){switch(b.type){case g:return B?B.set("authError","forbidden"):F().fromJS({authError:"missing"});case f.nk:return B&&B.delete("authError");case K:return F().fromJS(b.payload);case M:return F().fromJS(b.payload);case h:return null;case O:return B.set("isFetching",!0);case rt:return B.mergeDeep(b.payload,{isFetching:!1,authError:null});case ct:return B.merge(b.payload,{isFetching:!1,authError:null});case L:return B.merge({isFetching:!1,error:b.payload});default:return B}}function $(B=(0,i.fromJS)({}),b){switch(b.type){case J:return B.merge((0,i.fromJS)({resetSuccess:b.payload.success}));default:return B}}function X(B){const{user:b}=B;return(b==null?void 0:b.get("password_errors"))||null}function ut(B){const{userPassword:b}=B;return(b==null?void 0:b.get("resetSuccess"))||!1}function lt(B){const{user:b}=B;return b&&b.get("id")?b:null}function q(){var B;let b="",pt=!1;if(window.opener===null)return{originAllowedToAuth:!!pt,openerOrigin:b};const At=new URLSearchParams(window.location.search).get("opener-origin")||(0,l.jE)("opener-origin");try{b=(B=window.opener)==null?void 0:B.origin}catch(Bt){console.error(Bt)}return!b&&At&&((0,l.w4)("opener-origin",At,1e3*60*30),b=decodeURIComponent(At)),b&&(b=new URL(b).origin),pt=[window.origin,"https://www.netlify.com","https://docs.netlify.com"].includes(b),pt||(/--docs.netlify.app$/.test(b)||/--www.netlify.app$/.test(b))&&(pt=!0),{originAllowedToAuth:!!pt,openerOrigin:b}}},64614:(ft,z,t)=>{t.d(z,{Ks:()=>s,Uc:()=>J,gg:()=>_t,nY:()=>ct,oF:()=>gt,ot:()=>c,xm:()=>rt,y_:()=>h});var i=t(90046),F=t.n(i),f=t(18643),P=t(76371),y=t(91800),I=t(941);const m="BILLING_SUCCESS",p="PAYMENT_PROVIDER_TOKEN",E="PAYMENT_PROVIDER_TOKEN_SECURE_DECISION",S="BILLING_SUMMARY_SUCCESS",r="ACCOUNT_SUBSCRIPTIONS_SUCCESS",a="ACCOUNT_INVOICES_SUCCESS",l=(0,f.Z)(m,W=>W),o=(0,f.Z)(p,W=>W),u=(0,f.Z)(E,W=>W),n=(0,f.Z)(S,W=>W),e=(0,f.Z)(r,(W,Q)=>({id:W.get("id"),subscriptions:Q})),d=(0,f.Z)(a,(W,Q)=>({id:W.get("id"),invoices:Q}));function c(W){return Q=>{Q(u(W))}}function s(W){return(Q,w)=>{Q((0,y.i6)(W)),Q(_(W)),Q(g(W)),Q(O(W))}}function _(W){return(0,I.p5)((Q,w,V)=>V.accountBillingSummary(W.get("slug")).then(et=>Q(n(et.data))))}function g(W){return(0,I.p5)((Q,w,V)=>V.accountSubscriptions(W.get("slug")).then(et=>Q(e(W,et.data))))}function O(W){return(0,I.p5)((Q,w,V)=>V.accountInvoices(W.get("slug"),{pending:!0}).then(et=>Q(d(W,et.data))))}function L(W){return withApi((Q,w,V)=>V.updateBilling(W).then(et=>Q(l(et.data))))}function J(W,Q){return(0,I.p5)((w,V,et)=>{const N=rt(V()),R=gt(V(),W,Q,N);return w(o(null)),et.paymentProviderToken(R).then(U=>(U.data.sandbox=!!R.sandbox,U.data.enterpriseException=!!R.enterpriseException,U.data.secure=!!R.secure,w(o(U.data)),U.data))})}function K(W,Q){return W.base.toString().localeCompare((!!Q.base).toString())*-1||(W.site_domain||W.site_name||"").localeCompare(Q.site_domain||Q.site_name||"")||(W.site_id||"").localeCompare(Q.site_id||"")||(W.title||"").localeCompare(Q.title||"")}function M(W){return W.base||W.amount?!0:!(W.product_name.toLowerCase()==="bandwidth"||/usage/i.test(W.title)||W.quantity===0&&W.charges.every(Q=>Q.quantity===0))}function h(W=(0,i.Map)(),Q){switch(Q.type){case S:return W.set(Q.payload.id,(0,i.fromJS)(Q.payload));case r:return W.set(`${Q.payload.id}-subscriptions`,(0,i.fromJS)(Q.payload.subscriptions.filter(M).sort(K)));case a:return W.set(`${Q.payload.id}-invoices`,(0,i.fromJS)(Q.payload.invoices));case p:return W.set("paymentProviderToken",Q.payload);case E:return W.set("paymentProviderTokenSecure",Q.payload);default:return W}}function H(W){return W.billing&&W.billing.get("paymentProviderToken")}function rt(W){return W.billing&&W.billing.get("paymentProviderTokenSecure")}function ct(W){return W?(W.get("payments_gateway_name")||"").startsWith("zuora")?"zuora":"braintree":"zuora"}function gt(W,Q,w,V){const et=ct(Q),N=(0,P.qC)(Q);return{provider:et,sandbox:w,secure:V,accountId:Q&&Q.get("id"),enterpriseException:N}}function Ot(W,Q){return W.billing.get(Q.get("id"))}function x(W,Q){return W.billing.get(`${Q.get("id")}-subscriptions`)}function tt(W,Q){return W.billing.get(`${Q.get("id")}-invoices`)}function _t(W,Q){const w=Ot(W,Q);return w&&w.merge({subscriptions:x(W,Q),invoices:tt(W,Q)})}},64334:(ft,z,t)=>{t.d(z,{$T:()=>m,Bt:()=>P,HN:()=>I,Kr:()=>p,xF:()=>y});var i=t(18432),F=t(941);const f=(0,i.P)("buildHooks"),P=(0,i.x)("buildHooks",f);function y(S){return(0,F.p5)((r,a,l)=>l.buildHooks(S.get("id")).then(o=>r(f.buildHooksSuccess(S.get("id"),o.data,o.pagination))))}function I(S,r){return(0,F.p5)((a,l,o)=>o.addBuildHook(S.get("id"),{title:r.get("title"),branch:r.get("branch")}).then(u=>a(y(S))))}function m(S,r){return(0,F.p5)((a,l,o)=>o.removeBuildHook(S.get("id"),r.get("id")).then(u=>a(y(S))))}function p(S,r){const a=r&&S.buildHooks.getIn(["pages",r.get("id"),"ids"]);return a&&a.map(l=>E(S,l))}function E(S,r){return S.buildHooks.getIn(["entities",r])}},71333:(ft,z,t)=>{t.d(z,{$1:()=>K,DF:()=>w,Hg:()=>x,MZ:()=>et,UL:()=>Ot,ej:()=>h,fO:()=>tt,pO:()=>Q,qJ:()=>H,t9:()=>ct,tb:()=>gt,wr:()=>V,x6:()=>rt});var i=t(90046),F=t.n(i),f=t(18643),P=t(18432),y=t(98515),I=t(941);const m="BUILD_STATUS_SUCCESS",p="BUILD_STATUS_PER_SITE_SUCCESS",E="BUILDS_PER_DAY_SUCCESS",S="BUILD_QUEUE_BUMP_REQUEST",r="BUILD_QUEUE_BUMP_SUCCESS",a="BUILD_QUEUE_BUMP_FAILURE",l="WS_BUILD_CREATED",o="WS_BUILD_MODIFIED",u="WS_BUILD_DELETED",n=(0,f.Z)(m,(N,R)=>({id:N.get("id"),data:R})),e=(0,f.Z)(p,(N,R)=>({id:N.get("id"),data:R})),d=(0,f.Z)(E,(N,R)=>({id:N.get("id"),data:R})),c=(0,f.Z)(S,N=>({buildId:N})),s=(0,f.Z)(r,N=>({buildId:N})),_=(0,f.Z)(a,(N,R)=>({buildId:N,error:R})),g=(0,f.Z)(l,N=>N),O=(0,f.Z)(o,N=>N),L=(0,f.Z)(u,N=>N),J=(0,P.P)("builds"),K=(0,P.x)("builds",J,{handler:(N,R)=>{const{type:U,payload:G}=R;switch(U){case m:return N.set(G.id,(0,i.fromJS)(G.data));case p:return N.set(`${G.id}-per-site`,(0,i.fromJS)(G.data));case E:return N.set(`${G.id}-per-day`,(0,i.fromJS)(G.data));case S:{const{buildId:k}=G;return N.withMutations(at=>{at.setIn(["entities",k,"isPushing"],!0).setIn(["entities",k,"errorOnQueueBump"],null)})}case r:{const{buildId:k}=G;return N.setIn(["entities",k,"isPushing"],!1)}case a:{const{buildId:k,error:at}=G;return N.withMutations(Mt=>{Mt.setIn(["entities",k,"errorOnQueueBump"],(0,i.fromJS)(at)).setIn(["entities",k,"isPushing"],!1)})}case l:return(0,y.qK)(N,G);case o:return(0,y.Rt)(N,G);case u:return(0,y.GM)(N,G);default:return null}}});function M(N){return N.get("id")}function h(N,R={},U=!1){const G=M(N);return(0,I.p5)((k,at,Mt)=>(U&&k(J.buildsRequest(G)),Mt.accountBuilds(N.get("slug"),R).then(Et=>k(J.buildsSuccess(G,Et.data,Et.pagination)))))}function H(N){return(0,I.p5)((R,U,G)=>G.accountBuildStatus(N.get("slug")).then(k=>R(n(N,k.data))))}function rt(N,R){return(0,I.p5)((U,G,k)=>(U(c(R)),k.accountBuildQueueBump(N.get("slug"),R).then(()=>U(s(R))).catch(at=>{throw U(_(R,at)),at})))}function ct(N,R){return N.builds.get(R.get("id"))}function gt(N){return(0,I.p5)((R,U,G)=>G.accountBuildStatusPerSite(N.get("slug")).then(k=>R(e(N,k.data))))}function Ot(N,R){return N.builds.get(`${R.get("id")}-per-site`)}function x(N){return(0,I.p5)((R,U,G)=>G.accountBuildsPerDay(N.get("slug")).then(k=>{R(d(N,k.data))}))}function tt(N,R){return N.builds.get(`${R.get("id")}-per-day`)}function _t(N,R){const U=N.builds.getIn(["entities",R]);return U&&U.set("build_id",U.get("id"))}function W(N,R){const U=w(N,R);return U&&U.get("isFetching")}function Q(N,R){if(W(N,R))return null;const U=N.builds.getIn(["pages",M(R),"ids"]);return U&&U.map(G=>_t(N,G))}function w(N,R){return N.builds.getIn(["pages",M(R)])}const V=(N,R)=>U=>{const{page:G,account_id:k}=R;if(G===1){const at=M((0,i.fromJS)({id:k}));U(g(N.set("listKey",at)))}},et=(N,R)=>U=>{const G=M((0,i.fromJS)({id:R.account_id}));N.get("state")==="deleted"?U(L(N.set("listKey",G))):U(O(N.set("listKey",G)))}},64455:(ft,z,t)=>{t.d(z,{AB:()=>S,Bm:()=>E,Dj:()=>p,X1:()=>r,rE:()=>a});var i=t(90046),F=t.n(i),f=t(18643),P=t(941),y=t(34571);const I="CERTIFICATE_SUCCESS",m=(0,f.Z)(I,(l,o)=>({siteId:l,certificate:o}));function p(l){return(0,P.p5)((o,u,n)=>{const e=l.get("id");return n.certificate(e).then(d=>o(m(e,d.data)))})}function E(l,o,u){return(0,P.p5)((n,e,d)=>{const c=l.get("id");return o.force_ssl?n((0,y.L3)(l,o)):d.updateSsl(c,o,u).then(({data:s})=>(s&&n(m(c,s)),(!s||u)&&setTimeout(_=>n(p(l)),1*30*1e3),n((0,y.EQ)(l.get("name")))))})}function S(l){const o=l.get("id");return(0,P.p5)((u,n,e)=>e.verifySsl(o).then(d=>(0,i.fromJS)(d.data)))}function r(l=(0,i.Map)(),o){switch(o.type){case I:return l.set(o.payload.siteId,(0,i.fromJS)(o.payload.certificate));default:return l}}function a(l,o){return o.get("ssl")&&l.certificates.get(o.get("id"))}},99647:(ft,z,t)=>{t.d(z,{Ji:()=>p,TZ:()=>S,rF:()=>P,vc:()=>y,vv:()=>m});var i=t(90046),F=t.n(i);const f="UPDATE_CONFIG";function P(r){return{type:f,payload:r}}function y(r=F().Map(),a){switch(a.type){case f:return r.merge(a.payload);default:return r}}function I(r){return r.config.get("apiBase")}function m(r){const a=I(r);return a&&a.replace(/\/api\/v\d\/?$/,"")}function p(r){return r.config.get("siteId")}function E(r){return r.config.get("firebase")}function S(r){return r.config.get("githubAppId")}},11543:(ft,z,t)=>{t.d(z,{C0:()=>S,qh:()=>m,t6:()=>E});var i=t(90046),F=t.n(i),f=t(18643),P=t(941);const y="DEPLOY_ACTIVITY_SUCCESS",I=(0,f.Z)(y,r=>r);function m(r,a){var l;return(l=r.deployActivity.getIn(["data"]))==null?void 0:l.toJS()}function p([r,a]){const o=r.data.filter(n=>n.type==="comment").map(n=>n.service_comment_id),u=a.data.comments.filter(({body:n,id:e})=>!!n&&!o.includes(String(e)));return r.data.concat(u.map(n=>({type:"comment",comment:n})))}function E(r){return(0,P.p5)((a,l,o)=>Promise.all([o.deployActivity(r),o.fetchPullRequest(r)]).then(n=>{const e=p(n);return a(I(e))}).catch(n=>new P.Hx(n)))}const S=(r=(0,i.Map)(),a)=>{switch(a.type){case y:return r.set("data",(0,i.fromJS)(a.payload));default:return r}}},88572:(ft,z,t)=>{t.d(z,{A:()=>P,bO:()=>y,f$:()=>m});var i=t(18432),F=t(941);const f=(0,i.P)("deployCommitters"),P=(0,i.x)("deployCommitters",f,{key:"deployId"});function y(p,E){var S;return(S=p.deployCommitters.getIn(["entities",E,"data",0]))==null?void 0:S.toJS()}function I(p){return withApi((E,S,r)=>r.deployCommitters(p).then(a=>E(f.deployCommittersSuccess("deployCommitters",[{deployId:p,data:a.data}]))))}function m(p,E){return(0,F.p5)((S,r,a)=>a.inviteCommitter(p,E).then(l=>{S(f.inviteCommittersSuccess(l.data))}).catch(l=>new F.Hx(l)))}},37771:(ft,z,t)=>{t.d(z,{Mi:()=>u,RR:()=>o,ox:()=>l,qN:()=>S,rK:()=>r});var i=t(90046),F=t.n(i),f=t(18643),P=t(941),y=(n=>(n.DEPLOY_PLUGIN_RUNS_REQUEST="DEPLOY_PLUGIN_RUNS_REQUEST",n.DEPLOY_PLUGIN_RUNS_SUCCESS="DEPLOY_PLUGIN_RUNS_SUCCESS",n.DEPLOY_PLUGIN_RUNS_FAILURE="DEPLOY_PLUGIN_RUNS_FAILURE",n))(y||{});const I=(0,f.Z)("DEPLOY_PLUGIN_RUNS_REQUEST",n=>n),m=(0,f.Z)("DEPLOY_PLUGIN_RUNS_SUCCESS",(n,e)=>({deployId:n,deployPluginRuns:e})),p=(0,f.Z)("DEPLOY_PLUGIN_RUNS_FAILURE",(n,e)=>({deployId:n,error:e})),E=n=>n.reduce((e,d)=>(e.get(d.state)?e.set(d.state,e.get(d.state).push(d.package)):e.set(d.state,(0,i.List)([d.package]))).set("all",e.get("all").push(d.package)),(0,i.Map)({all:(0,i.List)()}));function S(n=(0,i.Map)(),e){switch(e.type){case"DEPLOY_PLUGIN_RUNS_REQUEST":return n.setIn([e.payload,"isFetching"],!0);case"DEPLOY_PLUGIN_RUNS_SUCCESS":{const{deployId:d,deployPluginRuns:c}=e.payload;return n.withMutations(s=>{c.forEach(_=>{s.setIn([d,"data",_.package],(0,i.fromJS)(_))}),s.setIn([d,"listByState"],E(c)).setIn([d,"isFetching"],!1)})}case"DEPLOY_PLUGIN_RUNS_FAILURE":{const{deployId:d,error:c}=e.payload;return n.setIn([d,"error"],(0,i.fromJS)(c)).setIn([d,"isFetching"],!1)}default:return n}}function r(n){return(0,P.p5)((e,d,c)=>(e(I(n)),c.deployPluginRuns(n).then(s=>e(m(n,s.data))).catch(s=>e(p(n,s)))))}function a(n,e){var d,c;return e&&(c=(d=n.deployPluginRuns.get(e))==null?void 0:d.get("isFetching"))!=null?c:!1}function l(n,e){var d;return e?(d=n.deployPluginRuns.get(e))==null?void 0:d.get("error"):void 0}function o(n,e){var d;return e?(d=n.deployPluginRuns.get(e))==null?void 0:d.get("data"):void 0}function u(n,e){var d;return e?(d=n.deployPluginRuns.get(e))==null?void 0:d.get("listByState"):void 0}},68154:(ft,z,t)=>{t.d(z,{$z:()=>E,CJ:()=>S,Ed:()=>r,LS:()=>a,SK:()=>l});var i=t(90046),F=t.n(i),f=t(18643),P=t(941),y=(o=>(o.DEPLOY_SUMMARY_REQUEST="DEPLOY_SUMMARY_REQUEST",o.DEPLOY_SUMMARY_SUCCESS="DEPLOY_SUMMARY_SUCCESS",o.DEPLOY_SUMMARY_FAILURE="DEPLOY_SUMMARY_FAILURE",o))(y||{});const I=(0,f.Z)("DEPLOY_SUMMARY_REQUEST",o=>o),m=(0,f.Z)("DEPLOY_SUMMARY_SUCCESS",(o,u)=>({deployId:o,deploySummary:u})),p=(0,f.Z)("DEPLOY_SUMMARY_FAILURE",(o,u)=>({deployId:o,error:u}));function E(o=(0,i.Map)(),u){switch(u.type){case"DEPLOY_SUMMARY_REQUEST":return o.setIn([u.payload,"isFetching"],!0);case"DEPLOY_SUMMARY_SUCCESS":{const{deployId:n,deploySummary:e}=u.payload;return o.setIn([n,"data"],(0,i.fromJS)(e)).setIn([n,"isFetching"],!1)}case"DEPLOY_SUMMARY_FAILURE":{const{deployId:n,error:e}=u.payload;return o.setIn([n,"error"],(0,i.fromJS)(e)).setIn([n,"isFetching"],!1)}default:return o}}function S(o){return(0,P.p5)((u,n,e)=>(u(I(o)),e.deploySummary(o).then(d=>u(m(o,d.data))).catch(d=>u(p(o,d)))))}function r(o,u){var n,e;return(e=(n=o.deploySummary.get(u))==null?void 0:n.get("isFetching"))!=null?e:!1}function a(o,u){var n;return(n=o.deploySummary.get(u))==null?void 0:n.get("error")}function l(o,u){var n;return(n=o.deploySummary.get(u))==null?void 0:n.get("data")}},84673:(ft,z,t)=>{t.d(z,{Bn:()=>tt,E:()=>J,FN:()=>_t,JN:()=>M,Kr:()=>rt,LT:()=>x,N2:()=>K,Nw:()=>_,Oh:()=>N,Q7:()=>H,dk:()=>at,e5:()=>g,hh:()=>U,il:()=>ct,kR:()=>w,lZ:()=>h,li:()=>W,ly:()=>R,mh:()=>k,pU:()=>V,rQ:()=>Et,tQ:()=>et,tk:()=>Mt,vQ:()=>Q});var i=t(90046),F=t.n(i),f=t(34740),P=t(19271),y=t(18643),I=t(18432),m=t(98515),p=t(941),E=t(34571);const S="SET_BUILD_TIME",r="DELETE_DEPLOY_SUCCESS",a="WS_DEPLOY_CREATED",l="WS_DEPLOY_MODIFIED",o="WS_DEPLOY_DELETED";function u(j){return new Date(j).setMilliseconds(0)}const n=(0,y.Z)(S,(j,ot,St)=>({id:j.get("id"),start:u(ot),end:u(St)})),e=(0,y.Z)(r,j=>({deployId:j})),d=(0,y.Z)(a,j=>j),c=(0,y.Z)(l,j=>j),s=(0,y.Z)(o,j=>j),_=(0,I.P)("deploys"),g=(0,I.x)("deploys",_,{handler:(j,ot)=>{const{type:St,payload:v}=ot;switch(St){case S:return j.set(v.id,(0,i.fromJS)({build_time:{start:v.start,end:v.end,seconds:(v.end-v.start)/1e3}}));case r:const{deployId:Z}=v;return j.withMutations(st=>{st.delete("pages"),st.deleteIn(["entities",Z]),st.delete(Z)});case a:return(0,m.qK)(j,v);case l:return(0,m.Rt)(j,v);case o:return(0,m.GM)(j,v);default:return null}}}),O={state:"pending_review"};function L(j,ot={}){return[j.get("id"),ot.state||"",ot.filter||"",ot.page||1].join("-")}function J(j,ot,St){return n(j,ot,St)}function K(j){return(0,p.p5)((ot,St,v)=>v.deploy(j).then(Z=>(ot(_.deploySuccess(Z.data)),U(St(),j))))}function M(j,ot={}){return(0,p.p5)((St,v,Z)=>Z.deploys(j.get("id"),ot).then(st=>St(_.deploysSuccess(L(j,ot),st.data,st.pagination))))}function h(j,ot={}){const St={...ot,perPage:100,minimal:!0},v=[];return(0,p.p5)((Z,st,yt)=>{const Pt=(vt,Rt)=>yt.deploys(vt.get("id"),Rt).then(Kt=>{var Lt;return v.push(...Kt.data),(Lt=Kt.pagination)!=null&&Lt.next?(Rt.page=Kt.pagination.next,Pt(vt,Rt)):(delete Rt.page,Z(_.deploysSuccess(L(vt,Rt),v,[])))});return Pt(j,St)})}function H(j){return M(j,O)}function rt(j,ot={}){return(0,p.p5)((St,v,Z)=>Promise.all([St(M(j,ot)),St(H(j))]))}function ct(j,ot){const St=j.get("id");return(0,p.p5)((v,Z,st)=>st.triggerDeploy(St,ot).then(yt=>{v((0,P.VF)(`/sites/${j.get("name")}/deploys/${yt.data.deploy_id}`))}))}function gt(j,ot){const St=j.get("id");return withApi((v,Z,st)=>st.triggerDeploy(St,ot))}function Ot(j,ot,St){const v=ot.get("id"),Z=j.get("name");return(0,p.p5)((st,yt,Pt)=>St(Pt,v).then(vt=>st(_.deploySuccess(vt.data))).then(()=>st((0,E.EQ)(Z))))}function x(j,ot){return Ot(j,ot,(St,v)=>St.publishDeploy(v))}function tt(j,ot){return Ot(j,ot,(St,v)=>St.lockDeploy(v))}function _t(j,ot){return Ot(j,ot,(St,v)=>St.unlockDeploy(v))}function W(j,ot){return Ot(j,ot,(St,v)=>St.cancelDeploy(v))}function Q(j,ot){const St=ot==null?void 0:ot.get("id");return(0,p.p5)((v,Z,st)=>st.deleteDeploy(St).then(()=>v(e(St))))}function w(j,ot,St){const v=ot.get("id"),Z=j.get("name");return(0,p.p5)((st,yt,Pt)=>Pt.retryDeploy(v,St).then(()=>f.mW.push(`/sites/${Z}/deploys`)))}function V(j){return(0,p.p5)((ot,St,v)=>v.acceptDeploy(j).then(Z=>ot(_.deploySuccess(Z.data))))}function et(j){return(0,p.p5)((ot,St,v)=>v.rejectDeploy(j).then(Z=>ot(_.deploySuccess(Z.data))))}function N(j,ot,St){const{perPage:v}=St,Z=j.deploys.getIn(["pages",L(ot,St),"ids"]),st=Z&&Z.map(yt=>U(j,yt));return st&&v?st.take(v):st}function R(j,ot,St){return j.deploys.getIn(["pages",L(ot,St)])}function U(j,ot){const St=j.deploys.getIn(["entities",ot]);return St&&St.merge(j.deploys.get(ot))}function G(j,ot){return N(j,ot,{filter:ot.getIn(["build_settings","repo_branch"])})}function k(j,ot){return N(j,ot,O)}function at(j,ot){return(G(j,ot)||(0,i.List)()).first()}const Mt=(j,ot)=>St=>{if((ot.page||1)===1){const Z=L((0,i.fromJS)({id:j.get("site_id")}),ot);St(d(j.set("listKey",Z)))}},Et=(j,ot)=>St=>{const v=L((0,i.fromJS)({id:j.get("site_id")}),ot);j.get("state")==="deleted"?St(s(j.set("listKey",v))):St(c(j))}},86025:(ft,z,t)=>{t.d(z,{TB:()=>r,h5:()=>o,kr:()=>n,m:()=>a,od:()=>d,pZ:()=>l,ul:()=>u});var i=t(18643),F=t(18432),f=t(941);const P="DNS_RECORD_CREATED",y="DNS_RECORD_DELETED",I="DNS_RECORDS_DELETED",m="DNS_RECORDS_CLEAR_PAGES",p=(0,F.P)("dnsRecords"),E=(0,i.Z)(P,(c,s)=>({domain:c,id:s})),S=(0,i.Z)(y,(c,s)=>({domain:c,id:s})),r=(0,i.Z)(y,c=>({domain:c})),a=(0,i.Z)(m);function l(c){return(0,f.p5)((s,_,g)=>g.dnsRecords(c).then(({data:O,pagination:L})=>s(p.dnsRecordsSuccess(c,O,L))))}function o(c,s){return(0,f.p5)((_,g,O)=>O.createDnsRecord(c.get("name"),s).then(({data:L})=>{_(p.dnsRecordSuccess(L)),_(E(c.get("name"),L.id))}))}function u(c,s){return(0,f.p5)((_,g,O)=>O.destroyDnsRecord(c.get("name"),s.get("id")).then(L=>_(S(c.get("name"),s.get("id")))))}const n=(0,F.x)("dnsRecords",p,{handler:(c,s)=>{switch(s.type){case P:return c.updateIn(["pages",s.payload.domain,"ids"],_=>_.push(s.payload.id));case y:return c.updateIn(["pages",s.payload.domain,"ids"],_=>_.filter(g=>g!==s.payload.id)).deleteIn(["entities",s.payload.id]);case I:return c.deleteIn(["pages",s.payload.domain]);case m:return c.delete("pages");default:return null}}});function e(c,s){return c.dnsRecords.getIn(["entities",s])}function d(c,s){const _=c.dnsRecords.getIn(["pages",s,"ids"]);return _&&_.map(g=>e(c,g))}},43800:(ft,z,t)=>{t.d(z,{Aw:()=>_,BC:()=>L,Fg:()=>W,Go:()=>x,HJ:()=>J,Hw:()=>N,RY:()=>K,Rr:()=>et,S4:()=>ct,XP:()=>Q,aL:()=>O,dI:()=>V,db:()=>g,gi:()=>rt,jx:()=>tt,q:()=>w,ql:()=>H,rG:()=>_t,x8:()=>h});var i=t(90046),F=t.n(i),f=t(18643),P=t(18432),y=t(63851),I=t(95972),m=t(941),p=t(60653),E=t(86025),S=t(34571);function r(R){return R&&R.get("slug")||null}const a="DNS_VERIFIED",l="DNSZONE_DELETED",o="DNSZONES_CLEAR_PAGES",u="DOMAIN_TOGGLE_AUTO_RENEW",n=(0,P.P)("dnsZones"),e=(0,f.Z)(a,(R,U)=>({domain:R,results:U})),d=(0,f.Z)(l,R=>({domain:R})),c=(0,f.Z)(o),s=(0,f.Z)(u);function _(R,U){const G=r(R);return(0,m.p5)((k,at,Mt)=>Mt.dnsZones(G,U).then(Et=>k(n.dnsZonesSuccess(G,Et.data,Et.pagination))))}function g(R){const U=r(R),G=[],k=async(at,Mt=1)=>at.dnsZones(U,Mt).then(Et=>{const{next:j}=Et==null?void 0:Et.pagination;return Et.data&&G.push(...Et.data),j?k(at,j):G});return(0,m.p5)((at,Mt,Et)=>k(Et).then(j=>at(n.dnsZonesSuccess(U,j))))}function O(R){return(0,m.p5)((U,G,k)=>k.dnsZone(R).then(({data:at})=>{U(n.dnsZoneSuccess(at)),U((0,E.pZ)(R))}).catch(at=>at.code===404||at.code===401?U(n.dnsZoneSuccess({name:R,error:at})):Promise.reject(at)).then(at=>Q(G(),R)))}function L(R,{account:U,site:G}){return(0,m.p5)((k,at,Mt)=>(k((0,E.m)()),Mt.dnsZone(R).then(({data:Et})=>Et.account_id!==(U&&U.get("id"))?Promise.reject(new y.Z("must be unique")):(k(n.dnsZoneSuccess(Et)),k((0,E.pZ)(Et.name)),Q(at(),Et.name))).catch(Et=>{switch(Et.code){case 404:return k(M(R,{account:U,site:G}));case 401:return Promise.reject(new y.Z("must be unique"));default:return Promise.reject(Et)}})))}function J(R,{account:U,site:G}){const k=G&&G.get("id");return(0,m.p5)((at,Mt,Et)=>Et.buyDomain(R,U.get("id"),k).then(({data:j})=>(at(O(j.domain)),k&&at((0,S.EQ)(G.get("name"))),{data:j})))}function K(R,{account:U}){return(0,m.p5)((G,k,at)=>at.searchDomain(R,U.get("id")).then(({data:Mt})=>Mt))}function M(R,{account:U,site:G}){return(0,m.p5)((k,at,Mt)=>Mt.createDnsZone(R,U.get("slug"),{site_id:G&&G.get("id")}).then(({data:Et})=>(k(n.dnsZoneSuccess(Et)),k((0,E.pZ)(Et.name)),k(c()),Q(at(),Et.name))))}function h(R,U){return(0,m.p5)((G,k,at)=>at.destroyDnsZone(R.get("id")).then(Mt=>{const Et=R.get("name");G(d(Et)),G((0,E.TB)(Et))}))}function H(R,U){return(0,m.p5)((G,k,at)=>{const Mt=R.get("name");return at.transferDnsZone(Mt,{account_id:R.get("account_id"),transfer_account_id:U.get("id"),transfer_user_id:(0,p.HF)(k()).get("id")}).then(Et=>G(O(Mt)))})}function rt(R,U){return(G,k)=>G((0,S.L3)(R,U))}function ct(R,U){const G=R.get("name"),k=R.get("account_id");return(0,m.p5)((at,Mt,Et)=>Et.toggleDomainAutoRenew(G,k,U).then(()=>at(s({domain:G,autorenew:U}))))}function gt(R){return R.json().then(U=>R.ok?U:Promise.reject(new y.Z(U||{})))}function Ot(R){return(0,I.hh)(R).then(U=>{const{subdomain:G,domain:k,tld:at}=U||{},Mt=U?`${k}.${at}`:R,Et=[R];return U&&!G?Et.push(`www.${Mt}`):G==="www"&&Et.push(Mt),{root:Mt,subdomain:G,results:Et.map(ot=>({domain:ot,result:!1,error:"We couldn\u2019t resolve the domain. Request timed out"}))}})}function x(R,U){return(G,k)=>{const at=!U&&V(k(),R);return at&&at.getIn(["results",0,"result"])?Promise.resolve(at):fetch(`/.netlify/functions/verify?domain=${R}`).then(Et=>gt(Et)).then(Et=>G(e(R,Et))).catch(Et=>Ot(R).then(j=>G(e(R,j)))).then(()=>V(k(),R))}}function tt(R){return(U,G)=>{const k=R.get("custom_domain");return k?U(x(k)):Promise.resolve()}}const _t=(0,P.x)("dnsZones",n,{key:"name",handler:(R,U)=>{switch(U.type){case a:return R.set(U.payload.domain,(0,i.fromJS)(U.payload.results));case l:return R.deleteIn(["entities",U.payload.domain]).delete("pages");case o:return R.delete("pages");case u:return R.setIn(["entities",U.payload.domain,"domain","auto_renew"],U.payload.autorenew);default:return null}}});function W(R,U){const G=R.dnsZones.getIn(["pages",r(U),"ids"]);return G&&G.map(k=>Q(R,k))}function Q(R,U){const G=R.dnsZones.getIn(["entities",U]);return G&&G.get("id")?G.set("records",(0,E.od)(R,U)):G}function w(R,U){return R.dnsZones.getIn(["pages",r(U)])}function V(R,U){return R.dnsZones.get(U)}function et(R){return(0,m.p5)((U,G,k)=>k.enableDnsZoneIPv6(R.get("id")).then(({data:at})=>{U(n.dnsZoneSuccess(at)),U((0,E.pZ)(R.get("name")))}))}function N(R,U){return(0,m.p5)((G,k,at)=>at.enableDedicatedDns(R.get("id")).then(({data:Mt})=>{G(n.dnsZoneSuccess(Mt))}))}},16702:(ft,z,t)=>{t.d(z,{y:()=>P});var i=t(90046),F=t.n(i),f=t(38086);function P(y=(0,i.Map)(),I){switch(I.type){case f.sz:return(0,i.Map)({active:!0});case f.Bs:return(0,i.Map)({active:!1});default:return y}}},38086:(ft,z,t)=>{t.d(z,{Bs:()=>r,QS:()=>L,Te:()=>_,Tu:()=>g,Xs:()=>l,ag:()=>J,f$:()=>a,sz:()=>S,ws:()=>O});var i=t(19271),F=t(18643),f=t(91800),P=t(68854),y=t(13287),I=t(941),m=t(60653),p=t(34571),E=t(93716);const S="START_DRAG",r="END_DRAG",a=(0,F.Z)(S),l=(0,F.Z)(r),o=()=>(0,P.le)("drop-token"),u=K=>(0,P.D$)("drop-token",K),n=()=>(0,P.le)("dropSiteName"),e=K=>(0,P.D$)("dropSiteName",K),d=K=>!!(0,m.HF)(K()),c=K=>(M,h)=>{const H=(0,f.uW)(h()),rt=(0,y.fd)(H)&&(H==null?void 0:H.get("slug"));return M((0,p.UJ)(rt)).then(ct=>{const gt=(0,P.le)("nf-drop-force-anon")==="true";return M((0,p.mV)(ct,K,gt))})},s=K=>(0,I.p5)((M,h,H)=>H.dropToken().then(rt=>rt.data.token).then(rt=>H.dropFiles((0,p.CJ)(K),rt).then(ct=>({token:rt,deploy:ct.data}))).then(({token:rt,deploy:ct})=>(0,p.Pr)(H,ct,K,rt).then(()=>H.waitForSiteDeploy(ct.subdomain)).then(gt=>({token:rt,site:gt.data}))).then(({site:rt,token:ct})=>{u(ct),e(rt.name),M(p.Nw.siteSuccess(rt)),M((0,p.wM)(rt.name)),M((0,i.VF)(`/drop/${rt.name}`)),_()})),_=()=>{(0,P.e8)("dropDeployId"),(0,P.e8)("dropUploadInterrupted")},g=()=>{(0,P.e8)("dropSiteName"),(0,P.e8)("drop-token"),_()},O=K=>(M,h)=>M(d(h)?c(K):s(K)),L=(K,M=o())=>(0,I.p5)((h,H,rt)=>{if(!d(H)){const tt=`/signup?next=${window.location.pathname}&utm_campaign=drop`;return h((0,E.Ee)(tt))}const{name:ct,id:gt,claimed:Ot}=K.toJS(),x=`/sites/${ct}`;return Ot?h((0,i.VF)(x)):rt.dropClaim(gt,M).then(()=>h((0,p.EQ)(ct))).then(()=>{g(),h((0,i.VF)(x))}).catch(()=>{})}),J=()=>{const K=o(),M=n();if(!(!K||!M))return(0,I.p5)((h,H,rt)=>{h((0,p.EQ)(M)).then(()=>{const ct=(0,p.lH)(H(),M,!1),{id:gt,claimed:Ot}=ct.toJS();if(Ot){g();return}return rt.dropClaim(gt,K).then(()=>h((0,p.EQ)(M))).then(()=>{g()})})})}},25554:(ft,z,t)=>{t.d(z,{$7:()=>o,Oi:()=>l,gI:()=>p,m9:()=>a,wQ:()=>r});var i=t(90046),F=t.n(i),f=t(18432),P=t(23979),y=t(941);const I="edgeFunctionLogs",m=(0,f.P)(I),p=(0,f.x)(I,m,{getKey:(u,n)=>`${u.ts}-${u.requestId}-${n}`});function E(u,n={}){return[u,n.cursor||"",n.q||"",n.from||"",n.to||""].filter(Boolean).join("-")}function S(u,n){const e=u.edgeFunctionLogs.getIn(["entities",n]);return e&&e.merge(u.edgeFunctionLogs.get(n))}function r(u,n,e={}){const d=u.edgeFunctionLogs.getIn(["pages",E(n,e),"ids"]);return d&&d.map(c=>S(u,c))}function a(u,n,e){return!!u.edgeFunctionLogs.getIn(["pages",E(n,e),"isFetching"])}function l(u,n,e){return u.edgeFunctionLogs.getIn(["pages",E(n,e),"next"])}function o(u,n){const e={cursor:n.cursor,q:n.q,from:n.from,to:n.to};return(0,P.wi)((d,c,s)=>{const _=E(u,e);return d(m.edgeFunctionLogsRequest(_)),s.historicalEdgeFunctionLogs({site_id:u,from:n.from,to:n.to,next_cursor:n.next_cursor,search:n.q}).then(g=>{const O=c(),L=r(O,u,n)||(0,i.List)(),J=[...L==null?void 0:L.toJS(),...g.data.logs];return d(m.edgeFunctionLogsSuccess(_,J,g.pagination))}).catch(g=>new y.Hx(g))})}},16939:(ft,z,t)=>{t.d(z,{Fl:()=>p,O9:()=>m,kZ:()=>E});var i=t(90046),F=t.n(i),f=t(18643),P=t(941);const y="EDGE_FUNCTIONS_SUCCESS",I=(0,f.Z)(y,(S,r)=>({deployId:S,data:r}));function m(S){return(0,P.p5)((r,a,l)=>l.edgeFunctions(S).then(o=>{r(I(S,o.data))}))}function p(S=(0,i.Map)(),r){switch(r.type){case y:{const{deployId:a,data:{edge_functions:l}}=r.payload;return S.setIn(["entities",a],l)}default:return S}}function E(S,r){return S.edgeFunctions.get("entities")?S.edgeFunctions.get("entities").get(r):[]}},61097:(ft,z,t)=>{t.d(z,{C7:()=>E,M2:()=>S,Y0:()=>u,_I:()=>o,aw:()=>l,bJ:()=>a,f6:()=>r,jB:()=>p,wB:()=>m,wY:()=>y});var i=t(18432),F=t(941);const f="environmentVariables",P=(0,i.P)(f),y=(0,i.x)(f,P,{key:"key"});function I(n,e){return n.environmentVariables.getIn(["entities",e]).toJS()}function m(n,e){const d=n.environmentVariables.getIn(["pages",e,"ids"]);return d&&d.map(c=>I(n,c)).toJS()}function p(n,e){return n.environmentVariables.getIn(["pages",e,"isFetching"])}function E(n,e){return n.environmentVariables.getIn(["pages",e,"error"])}function S({accountId:n,siteId:e,scope:d,context:c,merge:s}){return(0,F.p5)((_,g,O)=>(_(P.environmentVariablesRequest(e||n)),O.getEnvVars({accountId:n,siteId:e,scope:d,context:c,merge:s}).then(L=>_(P.environmentVariablesSuccess(e||n,L.data,L.pagination))).catch(L=>{Promise.reject(L),_(P.environmentVariablesFailure(e||n,L))})))}function r({accountId:n,siteId:e,envVars:d}){return(0,F.p5)((c,s,_)=>_.createEnvVars({accountId:n,siteId:e,envVars:d}).then(g=>c(S({accountId:n,siteId:e}))).catch(g=>Promise.reject(g)))}function a({accountId:n,siteId:e,oldKey:d,newKey:c,is_secret:s,scopes:_,values:g}){return(0,F.p5)((O,L,J)=>J.updateEnvVar({accountId:n,siteId:e,oldKey:d,newKey:c,is_secret:s,scopes:_,values:g}).then(K=>O(S({accountId:n,siteId:e}))).catch(K=>Promise.reject(K)))}function l({accountId:n,siteId:e,envVars:d}){return(0,F.p5)((c,s,_)=>Promise.all(d.map(g=>_.updateEnvVar({accountId:n,siteId:e,oldKey:g.key,newKey:g.key,is_secret:g.is_secret,scopes:g.scopes,values:g.values}))).then(g=>c(S({accountId:n,siteId:e}))).catch(g=>Promise.reject(g)))}function o({accountId:n,siteId:e,envVars:d}){return(0,F.p5)((c,s,_)=>Promise.all(d.flatMap(g=>g.values.map(({context:O,context_parameter:L,value:J})=>_.setEnvVarValue({accountId:n,siteId:e,key:g.key,context:O,context_parameter:L,value:J})))).then(g=>c(S({accountId:n,siteId:e}))).catch(g=>Promise.reject(g)))}function u({accountId:n,siteId:e,key:d,id:c}){return(0,F.p5)((s,_,g)=>g.deleteEnvVar({accountId:n,siteId:e,key:d,id:c}).then(O=>s(S({accountId:n,siteId:e}))).catch(O=>Promise.reject(O)))}},38504:(ft,z,t)=>{t.d(z,{$d:()=>d,A:()=>S,Hk:()=>I,Jo:()=>u,Rg:()=>e,XL:()=>o,cJ:()=>l,cY:()=>P,dI:()=>a,jn:()=>m,jy:()=>n,zH:()=>r});var i=t(18432),F=t(941);const f=(0,i.P)("forms"),P=(0,i.x)("forms",f),y=(0,i.P)("submissions"),I=(0,i.x)("submissions",y);function m(s){const _=s.get("id");return(0,F.p5)((g,O,L)=>L.siteForms(_).then(J=>g(f.formsSuccess(_,J.data,J.pagination))))}function p(s,_){return withApi((g,O,L)=>L.siteForm(_).then(J=>g(f.formSuccess(J.data))))}function E(s,_={}){return _.formId?_.formId:`site-${s.get("id")}`}function S(s,_){const g=s.get("id");return(0,F.p5)((O,L,J)=>(O(m(s)),J.formSubmissions(g,_).then(K=>O(y.submissionsSuccess(E(s,_),K.data,K.pagination)))))}function r(s,_,g){const O=s.get("id");return(0,F.p5)((L,J,K)=>Promise.all(_.map(M=>K.deleteFormSubmission(O,M))).then(M=>L(S(s,g))))}function a(s,_){const g=s.get("id");return(0,F.p5)((O,L,J)=>J.deleteForm(g,_))}function l(s,_,g){const O=s.get("id");return(0,F.p5)((L,J,K)=>Promise.all(_.map(M=>K.markSubmissionAsHam(O,M))).then(M=>{L(S(s,g))}))}function o(s,_,g){const O=s.get("id");return(0,F.p5)((L,J,K)=>Promise.all(_.map(M=>K.markSubmissionAsSpam(O,M))).then(M=>{L(S(s,g))}))}function u(s,_){const g=s.forms.getIn(["pages",_.get("id"),"ids"]);return g&&g.map(O=>s.forms.getIn(["entities",O]))}function n(s,_){return s.forms.getIn(["entities",_])}function e(s,_,g){const O=s.submissions.getIn(["pages",E(_,g),"ids"]);return O&&O.map(L=>s.submissions.getIn(["entities",L]))}function d(s,_,g){return s.submissions.getIn(["pages",E(_,g)])}function c(s,_){return s.submissions.getIn(["entities",_])}},62021:(ft,z,t)=>{t.d(z,{X4:()=>o,ZF:()=>l,lf:()=>a,rm:()=>r,tZ:()=>p});var i=t(90046),F=t.n(i),f=t(18432),P=t(23979),y=t(941);const I="functionLogs",m=(0,f.P)(I),p=(0,f.x)(I,m,{getKey:(u,n)=>`${u.ts}-${u.requestId}-${n}`});function E(u,n,e={}){return[u,n,e.branch||"",e.cursor||"",e.q||"",e.from||"",e.to||""].filter(Boolean).join("-")}function S(u,n){const e=u.functionLogs.getIn(["entities",n]);return e&&e.merge(u.functionLogs.get(n))}function r(u,n,e,d={}){const c=u.functionLogs.getIn(["pages",E(n,e,d),"ids"]);return c&&c.map(s=>S(u,s))}function a(u,n,e,d){return!!u.functionLogs.getIn(["pages",E(n,e,d),"isFetching"])}function l(u,n,e,d){return u.functionLogs.getIn(["pages",E(n,e,d),"next"])}function o(u,n,e){const d={branch:e.branch,cursor:e.cursor,q:e.q,from:e.from,to:e.to};return(0,P.wi)((c,s,_)=>{const g=E(u,n,d);return c(m.functionLogsRequest(g)),_.historicalFunctionLogs({site_id:u,name:n,branch:e.branch,from:e.from,to:e.to,next_cursor:e.next_cursor,search:e.q}).then(O=>{const L=s(),J=r(L,u,n,e)||(0,i.List)(),K=[...J==null?void 0:J.toJS(),...O.data.logs];return c(m.functionLogsSuccess(g,K,O.pagination))}).catch(O=>new y.Hx(O))})}},96666:(ft,z,t)=>{t.d(z,{Bc:()=>r,Ph:()=>p,ob:()=>a,wk:()=>E,x0:()=>S});var i=t(90046),F=t.n(i),f=t(18643),P=t(941);const y="FUNCTIONS_SUCCESS",I=(0,i.fromJS)({id:"empty",functions:[]}),m=(0,f.Z)(y,(l,o,u)=>({siteId:l,scope:o,data:u}));function p(l,o){const u=l.get("id");return(0,P.p5)((n,e,d)=>d.functions(u,o).then(c=>{n(m(u,o,c.data))}))}function E(l=(0,i.Map)(),o){switch(o.type){case y:{const{siteId:u,scope:n="default",data:e}=o.payload,d=e&&e.id?(0,i.fromJS)(e):I;return l.setIn(["entities",d.get("id")],d).setIn(["pages",u,n],d.get("id"))}default:return l}}function S(l,o,u){u=u||"default";const n=l.functions.getIn(["pages",o.get("id"),u]);return n&&l.functions.getIn(["entities",n])}function r(l,o,u){const n=S(l,o,u);return n&&n.get("functions").map(e=>e.set("c",e.get("c")||n.get("created_at")))}function a(l,o,u,n){const e=r(l,o,u);return e&&e.find(d=>d.get("n")===n)}},65628:(ft,z,t)=>{t.d(z,{$_:()=>n,Cl:()=>o,Fq:()=>e,Gu:()=>g,HN:()=>L,Kd:()=>d,L4:()=>s,Lb:()=>J,YR:()=>c,fc:()=>l,oI:()=>_,qq:()=>O,z8:()=>K});var i=t(90046),F=t.n(i),f=t(18643),P=t(88317),y=t(25169),I=t(91800),m=t(60653);const p="GIT_NO_PROVIDER",E="GIT_SET_PROVIDER",S="GIT_SET_SEARCH_TERM",r="GIT_SET_USER",a=(0,f.Z)(p),l=(0,f.Z)(E,(M,h)=>({provider:M,credentials:h})),o=(0,f.Z)(S,M=>M),u=(0,f.Z)(r,M=>M);function n(M){return(h,H)=>{const rt=(0,y.Ev)(H());return rt?M(h,H,rt):h(a())}}function e(M,h){let H=!1;return M==="github-proxied"&&(M=P.Lz.github,H=!0),(rt,ct)=>{const gt=ct().git,Ot=gt&&M===gt.get("provider")?(0,y.Wx)(M,gt.get("accessToken"),gt.get("apiEndpoint")):(0,y.Wx)(M);return Ot?(H&&(Ot.root="/.netlify/functions/git"),h(rt,ct,Ot)):rt(a())}}function d(){return n((M,h,H)=>H.user().then(rt=>(M(u(rt.data)),K(h()))))}function c(M){return(h,H)=>h((0,m.YR)(M)).then(()=>h(d()))}function s(M=(0,i.Map)(),h){switch(h.type){case E:const H={provider:h.payload.provider,accessToken:h.payload.credentials.token};return h.payload.credentials.refresh_token&&(H.refreshAccessToken=h.payload.credentials.refresh_token),h.payload.credentials.api_endpoint&&(H.apiEndpoint=h.payload.credentials.api_endpoint),(0,i.fromJS)(H);case S:return M.set("search",h.payload);case r:return M.set("user",(0,i.fromJS)(h.payload));default:return M}}function _(M){return M.git.get("provider")}function g(M){return M.git.get("accessToken")}function O(M){return M.git.get("apiEndpoint")}function L(M){return M.git.get("provider")!=="bitbucket_self_hosted"?void 0:(0,I.uW)(M).getIn(["bitbucket_self_hosted_config","instance_url"])}function J(M){return M.git.get("search")}function K(M){return M.git.get("user")}},72253:(ft,z,t)=>{t.d(z,{Ht:()=>y,YX:()=>I,hi:()=>P,wc:()=>m});var i=t(18432),F=t(65628);const f=(0,i.P)("gitOrganizations");function P(){return(0,F.$_)((p,E,S)=>{p(f.gitOrganizationsRequest(S.provider));const a=E().git.getIn(["user","login"]);S.organizations({userLogin:a}).then(l=>p(f.gitOrganizationsSuccess(S.provider,l.data,l.pagination)),l=>p(f.gitOrganizationsFailure(S.provider,l)))})}const y=(0,i.x)("gitOrganizations",f,{key:"full_name"});function I(p){const E=(0,F.oI)(p),S=p.gitOrganizations.getIn(["pages",E,"ids"]);return S&&S.map(r=>m(p,r))}function m(p,E){return p.gitOrganizations.getIn(["entities",E])}},62326:(ft,z,t)=>{t.d(z,{Z:()=>y});const i=new Map,F=1e3*60*5;function f(I){return"jwt"in I&&I.expiration-F<performance.now()}const P=async({accountId:I})=>{const m=`/access-control/bb-api/api/v1/accounts/${I}/jwt`,p=await fetch(m,{headers:{"Content-type":"application/json"},credentials:"include"});if(p.status===200)return await p.json();throw new Error(`Non-200 status when exchanging API token for short-lived JWT: ${p.status}`)};function y({accountId:I}){const m=i.get(I);if(m&&!f(m))return Promise.resolve(m);const p=P({accountId:I}).then(E=>{const S=E.jwt,r=S.split(".")[1].replace(/_/g,"/").replace(/-/g,"+"),a=JSON.parse(atob(r)),l=a.exp-a.iat,o=performance.now()+l*1e3;return i.set(I,{jwt:S,expiration:o}),{jwt:S,expiration:o}}).catch(E=>{throw i.delete(I),E});return i.set(I,p),p}},18432:(ft,z,t)=>{t.d(z,{P:()=>y,x:()=>I});var i=t(90046),F=t.n(i),f=t(17412),P=t(18643);function y(m){const p=(0,f.C5)(m),E=p.toUpperCase(),S=m.toUpperCase(),r={REQUEST:`${E}_REQUEST`,SUCCESS:`${E}_SUCCESS`,FAILURE:`${E}_FAILURE`},a={REQUEST:`${S}_REQUEST`,SUCCESS:`${S}_SUCCESS`,FAILURE:`${S}_FAILURE`},l=(0,P.Z)(r.REQUEST,K=>K),o=(0,P.Z)(r.SUCCESS,K=>K),u=(0,P.Z)(r.FAILURE,(K,M)=>({id:K,error:M})),n=(0,P.Z)(a.REQUEST,K=>K),e=(0,P.Z)(a.SUCCESS,(K,M,h)=>({list:K,entities:M,pages:h})),d=(0,P.Z)(a.FAILURE,(K,M)=>({list:K,error:M})),c=`${p}Request`,s=`${p}Success`,_=`${p}Failure`,g=`${m}Request`,O=`${m}Success`,L=`${m}Failure`;return{[E]:r,[S]:a,[c]:l,[s]:o,[_]:u,[g]:n,[O]:e,[L]:d}}function I(m,p,E={}){const S=m,r=(0,f.C5)(m),a=S.toUpperCase(),l=r.toUpperCase();return(o=(0,i.Map)({entities:(0,i.Map)(),pages:(0,i.Map)()}),u)=>{const n=E.handler&&E.handler(o,u);if(n)return n;const e=E.key||"id",d=E.getKey||(c=>c[e]);switch(u.type){case p[l].REQUEST:return o.setIn(["entities",u.payload,"isFetching"],!0);case p[l].SUCCESS:{const c=d(u.payload).toString(),s=o.getIn(["entities",c])||(0,i.Map)();return o.setIn(["entities",c],s.merge(u.payload,{isFetching:!1}))}case p[l].FAILURE:return o.withMutations(c=>{c.setIn(["entities",u.payload.id,"error"],(0,i.fromJS)(u.payload.error)).setIn(["entities",u.payload.id,"isFetching"],!1)});case p[a].REQUEST:return o.setIn(["pages",u.payload,"isFetching"],!0);case p[a].SUCCESS:{const{list:c,entities:s,pages:_}=u.payload;return o.withMutations(g=>{s.forEach((O,L)=>g.setIn(["entities",d(O,L).toString()],(0,i.fromJS)(O).set("isFetching",!1))),g.setIn(["pages",c],(0,i.Map)({..._,ids:(0,i.List)(s.map((O,L)=>d(O,L).toString()))}))})}case p[a].FAILURE:return o.setIn(["pages",u.payload.list,"error"],(0,i.fromJS)(u.payload.error));default:return o}}}},86981:(ft,z,t)=>{t.d(z,{$_:()=>S,Bi:()=>p,Eq:()=>r,PT:()=>a,e_:()=>o,ny:()=>E,o6:()=>u,v9:()=>m});var i=t(90046),F=t.n(i),f=t(18432),P=t(941);const y=(0,f.P)("hooks"),I="HOOK_TYPES";function m(e){return(0,P.p5)((d,c,s)=>(d(y.hooksRequest(e.get("id"))),s.hooks(e.get("id")).then(_=>d(y.hooksSuccess(e.get("id"),_.data,_.pagination)),_=>d(y.hooksFailure(e.get("id"),_.message)))))}function p(e,d){const c={site_id:e.get("id"),event:d.event,type:d.type,data:d.data,form_id:d.form_id};return(0,P.p5)((s,_,g)=>g.addHook(c).then(O=>{s(m(e))}))}function E(e,d,c){const s=d.get("id");return(0,P.p5)((_,g,O)=>O.updateHook(s,c).then(L=>L.data.disabled?O.enableHook(s):Promise.resolve(L)).then(()=>_(m(e))))}function S(e,d){return(0,P.p5)((c,s,_)=>_.deleteHook(d.get("id")).then(g=>c(m(e))))}function r(e){return(0,P.p5)((d,c,s)=>s.hookTypes(e.get("id")).then(_=>d({type:I,payload:{siteId:e.get("id"),types:_.data}})))}const a=(0,f.x)("hooks",y,{handler:(e,d)=>{switch(d.type){case I:return e.setIn(["types",d.payload.siteId],(0,i.fromJS)(d.payload.types));default:return null}}});function l(e,d){return e.hooks.getIn(["entities",d])}function o(e,d){const c=e.hooks.getIn(["pages",d.get("id"),"ids"]);return c&&c.map(s=>l(e,s))}function u(e,d){return e.hooks.getIn(["types",d.get("id")])}function n(e,d,c){const s=u(e,d);return s&&s.find(_=>_.get("name")===c)}},44195:(ft,z,t)=>{t.d(z,{$O:()=>h,EI:()=>L,Ey:()=>gt,FJ:()=>K,PO:()=>s,XD:()=>O,bU:()=>H,cG:()=>Ot,dU:()=>J,dk:()=>c,eO:()=>d,jZ:()=>e,mK:()=>M,mt:()=>rt,qD:()=>u,r6:()=>g,yR:()=>n});var i=t(90046),F=t.n(i),f=t(19271),P=t(18643),y=t(18432),I=t(77962),m=t(941),p=t(34571);const E="IDENTITY_CREATED",S="IDENTITY_SUCCESS",r=(0,y.P)("identityUsers"),a=(0,P.Z)(E,(x,tt)=>({siteId:x,data:tt})),l=(0,P.Z)(S,(x,tt)=>({siteId:x,data:tt})),o=(x,{filter:tt})=>`${x}${tt?`-${tt}`:""}`,u=(0,y.x)("identityUsers",r);function n(x=(0,i.Map)(),tt){switch(tt.type){case E:case S:return x.set(tt.payload.siteId,(0,i.fromJS)(tt.payload.data));default:return x}}function e(x,tt){return x.identity.get(tt.get("id"))}function d(x,tt){return x.identityUsers.getIn(["entities",tt])}function c(x,tt,_t){const W=x.identityUsers.getIn(["pages",o(tt.get("id"),_t),"ids"]);return W&&W.map(Q=>d(x,Q))}function s(x,tt,_t){return x.identityUsers.getIn(["pages",o(tt.get("id"),_t)])}function _(x,tt,_t){const W=e(_t(),x);return W?Promise.resolve(W):tt(g(x)).then(()=>e(_t(),x))}function g(x){const tt=x.get("id"),_t=x.get("identity_instance_id");return(0,m.p5)((W,Q,w)=>_t?w.identity(tt,_t).then(V=>W(l(tt,V.data))):Promise.resolve())}function O(x,tt={}){const _t=x.get("id");return(0,m.p5)((W,Q,w)=>w.createIdentity(_t,tt).then(V=>W(a(_t,V.data))).then(()=>W((0,p.EQ)(x.get("name")))).then(V=>W((0,p.ZO)(V))))}function L(x,tt){const _t=x.get("id"),W=x.get("identity_instance_id");return(0,m.p5)((Q,w,V)=>W?V.updateIdentity(_t,W,tt).then(()=>Q(g(x))):Promise.reject({code:404}))}function J(x){const tt=x.get("id"),_t=x.get("identity_instance_id");return(0,m.p5)((W,Q,w)=>_t?w.deleteIdentity(tt,_t).then(()=>W((0,p.EQ)(x.get("name")))):Promise.resolve())}function K(x,tt={}){const _t=x.get("id"),W=x.get("identity_instance_id");return(0,m.p5)((Q,w,V)=>W?V.identityUsers(_t,W,tt).then(et=>Q(r.identityUsersSuccess(o(_t,tt),et.data,et.pagination))).catch(et=>et.code===404?Q(r.identityUsersSuccess(o(_t,tt),[],{})):Promise.reject(et)):Promise.resolve())}function M(x,tt){const _t=x.get("id"),W=x.get("identity_instance_id");return(0,m.p5)((Q,w,V)=>W?_(x,Q,w).then(()=>V.identityUser(_t,W,tt).then(et=>Q(r.identityUserSuccess(et.data)))):Promise.reject({code:404}))}function h(x,tt){const _t=x.get("id"),W=x.get("identity_instance_id");return(0,m.p5)((Q,w,V)=>V.createIdentityUser(_t,W,tt).then(et=>Q(K(x))))}function H(x,tt,_t){const W=x.get("id"),Q=x.get("identity_instance_id"),w=tt.get("id");return(0,m.p5)((V,et,N)=>(V(ct(x,_t)),N.updateIdentityUser(W,Q,w,_t).then(()=>V(M(x,w)))))}function rt(x,tt){const _t=x.get("id"),W=x.get("identity_instance_id"),Q=tt.get("id");return(0,m.p5)((w,V,et)=>et.deleteIdentityUser(_t,W,Q).then(()=>w(K(x))).then(()=>w((0,f.VF)((0,I.DD)(x,"identity")))))}function ct(x,tt){const _t=tt&&tt.app_metadata&&tt.app_metadata.roles;return(0,m.p5)((W,Q,w)=>_t&&_t.length?_(x,W,Q).then(V=>{if(!V)return;const et=(0,i.Set)(V.getIn(["external_attributes","roles"])),N=et.merge(_t);N.size>et.size&&W(L(x,{external_attributes:{roles:N}}))}):Promise.resolve())}function gt(x,tt){const _t=x.get("id"),W=x.get("identity_instance_id"),Q=tt.get("id");return(0,m.p5)((w,V,et)=>et.sendIdentityRecovery(_t,W,Q))}function Ot(x,tt){const _t=x.get("id"),W=x.get("identity_instance_id");return(0,m.p5)((Q,w,V)=>V.sendIdentityInvites(_t,W,{invites:tt}).then(()=>Q(K(x))))}},95063:(ft,z,t)=>{t.d(z,{Hi:()=>I,Y5:()=>p,bo:()=>S,iK:()=>E});var i=t(18432),F=t(941);const f=(0,i.P)("identityAudits"),P=({siteId:r,searchTerm:a}={})=>`${r}${a?`-${a}`:""}`,y=r=>r.map(a=>(a&&a.payload&&a.payload.log_type&&(a.payload.log_type=`gotrue-${a.payload.log_type}`),a)),I=(0,i.x)("identityAudits",f);function m(r,a){return r.identityAudit.getIn(["entities",a])}function p(r,a){const l=r.identityAudit.getIn(["pages",P(a),"ids"]);return l&&l.map(o=>m(r,o))}function E(r,a){return r.identityAudit.getIn(["pages",P(a)])}function S(r){return(0,F.p5)((a,l,o)=>r.identityId&&r.isValidKey?o.identityAudit(r).then(u=>a(f.identityAuditsSuccess(P(r),y(u.data),u.pagination))).catch(u=>u.code===404?a(f.identityAuditsSuccess(P(r),[],{})):Promise.reject(u)):Promise.resolve())}},13440:(ft,z,t)=>{t.d(z,{V2:()=>y,Yx:()=>I,rI:()=>p,uX:()=>E});var i=t(18432),F=t(941);const f=(0,i.P)("largeMediaAssets"),P=(S,{filter:r})=>`${S}${r?`-${r}`:""}`,y=(0,i.x)("largeMediaAssets",f);function I(S,r){const a=S.get("id"),l=S.get("use_lm");return(0,F.p5)((o,u,n)=>l?n.largeMediaAssets(a,r).then(e=>o(f.largeMediaAssetsSuccess(P(a,r),e.data,e.pagination))):Promise.resolve())}function m(S,r){return S.largeMediaAssets.getIn(["entities",r])}function p(S,r,a){const l=S.largeMediaAssets.getIn(["pages",P(r.get("id"),a),"ids"]);return l&&l.map(o=>m(S,o))}function E(S,r,a){return S.largeMediaAssets.getIn(["pages",P(r.get("id"),a)])}},65524:(ft,z,t)=>{t.d(z,{GO:()=>p,Lf:()=>y,SK:()=>E,V4:()=>a,X5:()=>S,b_:()=>I,cU:()=>m,vR:()=>r});var i=t(18432),F=t(941);const f="logDrains",P=(0,i.P)(f),y=(0,i.x)(f,P);function I(l,o){var u,n;const[e]=((u=l.logDrains.getIn(["pages",o,"ids"]))==null?void 0:u.toJS())||[];return(n=l.logDrains.getIn(["entities",e]))==null?void 0:n.toJS()}function m(l,o){return l.logDrains.getIn(["pages",o,"isFetching"])}function p(l){return(0,F.p5)((o,u,n)=>(o(P.logDrainsRequest(l)),n.logDrains(l).then(e=>{(e.data||[]).forEach(d=>{const{url:c,integration_name:s}=d.service_config;c&&new URL(c).host.endsWith(".sumologic.com")&&(d.destination="sumologic"),s&&(d.destination=s)}),o(P.logDrainsSuccess(l,e.data))})))}function E(l,o={}){return(0,F.p5)((u,n,e)=>e.createLogDrain(l,o).then(d=>{u(P.logDrainsSuccess(l,[d.data]))}))}function S(l,o,u){return(0,F.p5)((n,e,d)=>d.verifyLogDrain(l,o,u).then(()=>{const c=e(),_={...I(c,l),verified:!0};n(P.logDrainsSuccess(l,[_]))}))}function r(l,o,u={}){return(0,F.p5)((n,e,d)=>d.updateLogDrain(l,o,u).then(c=>{n(P.logDrainsSuccess(l,[c.data]))}))}function a(l,o){return(0,F.p5)((u,n,e)=>e.deleteLogDrain(l,o).then(()=>{u(P.logDrainsSuccess(l,[]))}))}},32293:(ft,z,t)=>{t.d(z,{Ol:()=>E,Tq:()=>S,ad:()=>a,el:()=>I});var i=t(19271),F=t(18432),f=t(91800),P=t(941);const y=(0,F.P)("members");function I(l){const o=l.get("id");return(0,P.p5)((u,n,e)=>(u(y.membersRequest(o)),e.members(o).then(d=>u(y.membersSuccess(o,d.data,d.pagination)))))}function m(l,o){return withApi((u,n,e)=>(u(y.membersRequest(l.get("id"))),Promise.all(o.map(d=>e.inviteMember(l.get("id"),d))).then(d=>u(I(l)),d=>u(I(l)))))}function p(l,o){return withApi((u,n,e)=>(u(y.membersRequest(l.get("id"))),e.removeMember(l.get("id"),o.get("id")).then(d=>u(I(l)))))}function E(l){return(0,P.p5)((o,u,n)=>n.acceptInvite(l).then(e=>{e.data.site_id?o((0,i.VF)(`/sites/${e.data.name}`)):o((0,f.vP)()).then(()=>o((0,i.VF)(`/teams/${e.data.slug}`)))}))}const S=(0,F.x)("members",y);function r(l,o){return l.members.getIn(["entities",o])}function a(l,o){const u=l.members.getIn(["pages",o.get("id"),"ids"]);return u&&u.map(n=>r(l,n))}},98990:(ft,z,t)=>{t.d(z,{Af:()=>E,B_:()=>S,Fd:()=>r,NK:()=>l,Vy:()=>o,WU:()=>u,jJ:()=>p,sv:()=>a});var i=t(90046),F=t.n(i),f=t(941),P=t(60653);const y="MULTIFACTOR_AUTH_SETUP",I="MULTIFACTOR_AUTH_ENABLE",m="MULTIFACTOR_AUTH_DISABLE";function p(n=(0,i.fromJS)({}),e){switch(e.type){case y:return n.merge((0,i.fromJS)({setup:e.payload}));case I:return n.merge((0,i.fromJS)({isEnabled:!0,recoveryCodes:e.payload}));case m:return n.merge((0,i.fromJS)({isEnabled:!1,recoveryCodes:null}));default:return n}}function E(){return(0,f.p5)(async(n,e,d)=>{const{data:c}=await d.setupMultiFactorAuth();n({type:y,payload:c})})}function S({otp:n,token:e}){return(0,f.p5)(async(d,c,s)=>{const{data:_}=await s.enableMultiFactorAuth({otp:n,token:e});d({type:I,payload:_.backup_codes})})}function r({otp:n}){return(0,f.p5)(async(e,d,c)=>{const{data:s}=await c.disableMultiFactorAuth({otp:n});e({type:m,payload:s}),e((0,P.$D)({reload:!0}))})}function a({otp:n,token:e}){return(0,f.p5)(async(d,c,s)=>{const{data:_}=await s.verifyLogin({otp:n,token:e});window.location.href=_.redirect_path})}function l(n){const{multiFactorAuth:e}=n;return(e==null?void 0:e.get("setup"))||null}function o(n){const{user:e,multiFactorAuth:d}=n;return!!(d!=null&&d.get("isEnabled"))||!!(e!=null&&e.get("mfa_enabled"))||!1}function u(n){const{multiFactorAuth:e}=n;return e==null?void 0:e.get("recoveryCodes")}},5774:(ft,z,t)=>{t.d(z,{A7:()=>a,N9:()=>n,P$:()=>u,_6:()=>o,oA:()=>r,y9:()=>l});var i=t(90046),F=t.n(i),f=t(18643),P=t(7442),y=t(63851),I=t(26527),m=t(60653);const p="NOTIFICATIONS_SUCCESS",E=(0,f.Z)(p,e=>e);function S(e,d){const c=e.getIn(["onboarding_progress","notifications_read_at"]);return new Date(c)<new Date(d)}function r(){return(e,d)=>{fetch("/.netlify/builders/notifications").then(c=>{if(!c.ok)throw new Error(`Error fetching notifications - ${c.status} - ${c.statusText}`);return c.json().catch(s=>{throw new Error(`Error parsing notifications JSON - ${c.status}`)})}).then(c=>{e(E(c))}).catch(c=>{throw new y.Z(c.message||c)})}}function a(e){return(d,c)=>{const{accounts:s,user:_}=c(),g=e&&e.getIn([0,"updated_at"]);P.iND.appNotificationButtonClicked({accountSlug:s.get("selected"),flagged:S(_,g),notificationNames:e&&e.map(O=>(0,I.lV)(O==null?void 0:O.get("title"))).toJS()}),d((0,m.fq)("notifications_read_at",g))}}function l(e){return(d,c)=>{const{accounts:s}=c();P.iND.appNotificationItemClicked({accountSlug:s.get("selected"),notificationName:(0,I.lV)(e.get("title"))})}}function o(e){return e.notifications.get("data")}function u(e){const d=(0,m.HF)(e);return d&&d.getIn(["onboarding_progress","notifications_read_at"])}const n=(e=(0,i.Map)(),d)=>{switch(d.type){case p:return e.set("data",(0,i.fromJS)(d.payload));default:return e}}},32712:(ft,z,t)=>{t.d(z,{$6:()=>Zt,AN:()=>j,Ak:()=>st,Av:()=>R,Ek:()=>W,FV:()=>vt,Hh:()=>V,Hp:()=>Mt,IK:()=>K,Ly:()=>Ot,O1:()=>Et,Ov:()=>w,Ox:()=>Wt,P6:()=>k,Pk:()=>ot,Q:()=>v,Q2:()=>U,RF:()=>Pt,Tz:()=>St,Ul:()=>h,W2:()=>Lt,Wu:()=>gt,XQ:()=>G,Xj:()=>M,Y3:()=>qt,_b:()=>rt,c3:()=>J,cr:()=>Z,dm:()=>L,g8:()=>Rt,h1:()=>tt,j6:()=>_t,ji:()=>yt,k:()=>g,lI:()=>Kt,mT:()=>at,me:()=>Q,mf:()=>s,nU:()=>O,p_:()=>et,u2:()=>ct,vI:()=>H,v_:()=>x,yK:()=>_,yL:()=>N});var i=t(5780),F=t.n(i),f=t(90046),P=t.n(f),y=t(19271),I=t(18432),m=t(63851),p=t(91800),E=t(941),S=t(52968),r=t(93716);const a=(0,I.P)("organizations"),l=(0,I.P)("organizationAccounts"),o=(0,I.P)("organizationInvoices"),u=(0,I.P)("organizationClientToken"),n=(0,I.P)("organizationReceipts"),e=(0,I.P)("organizationSaml"),d=(0,I.P)("organizationScims"),c=(0,I.P)("organizationScimMappings"),s=(0,I.x)("organizations",a,{key:"slug"}),_=(0,I.x)("organizationAccounts",l),g=(0,I.x)("organizationInvoices",o),O=(0,I.x)("organizationReceipts",n,{key:"transaction_id"}),L=(0,I.x)("organizationSaml",e,{key:"list"}),J=(0,I.x)("organizationScim",d),K=(0,I.x)("organizationScimMappings",c);function M($){return(0,E.p5)((X,ut,lt)=>(X(a.organizationRequest($)),lt.organization($).then(q=>X(a.organizationSuccess(q.data))).catch(q=>X(a.organizationFailure($,q)))))}function h($){return(0,E.p5)((X,ut,lt)=>(X(l.organizationAccountsRequest($)),lt.organizationAccounts($).then(q=>{X(l.organizationAccountsSuccess($,q.data))}).catch(q=>X(l.organizationAccountsFailure($,q)))))}function H($){return(0,E.p5)((X,ut,lt)=>(X(o.organizationInvoicesRequest($)),lt.organizationInvoices($).then(q=>X(o.organizationInvoicesSuccess($,q.data))).catch(q=>X(o.organizationInvoicesFailure($,q)))))}function rt($){return(0,E.p5)((X,ut,lt)=>(X(n.organizationReceiptsRequest($)),lt.organizationReceipts($).then(q=>X(n.organizationReceiptsSuccess($,q.data))).catch(q=>X(n.organizationReceiptsFailure($,q)))))}function ct($){return(0,E.p5)((X,ut,lt)=>(X(u.organizationClientTokenRequest($)),lt.organizationClientToken($).then(q=>(q.data.organization_id=$,X(u.organizationClientTokenSuccess($,q.data)),q.data)).catch(q=>X(u.organizationClientTokenFailure($,q)))))}function gt(){return(0,E.p5)(($,X,ut)=>($(a.organizationsRequest("organizations")),ut.organizations().then(lt=>$(a.organizationsSuccess("organizations",lt.data,lt.pagination)),lt=>$(a.organizationsFailure("organizations",lt)))))}function Ot($){return(0,E.p5)((X,ut,lt)=>lt.organizationSamlConnection($).then(q=>(X(e.organizationSamlSuccess($,q.data)),q.data)))}function x($){return(0,E.p5)((X,ut,lt)=>(X(d.organizationScimRequest($)),lt.organizationScimConnection($).then(q=>{const B=q.data.status||"inactive";return X(d.organizationScimSuccess({id:$,...q.data,status:B}))})))}function tt($){return(0,E.p5)((X,ut,lt)=>(X(c.organizationScimMappingRequest($)),lt.organizationScimMappings($).then(q=>X(c.organizationScimMappingSuccess({id:$,groups:q.data})))))}function _t($){return(0,E.p5)((X,ut,lt)=>lt.organizationSamlDashboard($).then(({data:q})=>q.workos_portal_url))}function W($){return(0,E.p5)((X,ut,lt)=>lt.organizationScimDashboard($).then(({data:q})=>q.workos_portal_url))}function Q($,X){return(0,E.p5)((ut,lt,q)=>q.organizationScimStatus($,X).then(()=>{ut(x($))}))}function w($){return(0,E.p5)((X,ut,lt)=>lt.organizationSamlDeleteConnection($).then(()=>{X(Ot($))}))}function V($){const X=$.organizations.getIn(["pages","organizations","ids"]);return X==null?void 0:X.map(ut=>at($,ut))}function et($){return $.organizations.getIn(["pages","organizations","isFetching"])}function N($,X){return $.organizations.getIn(["entities",X,"isFetching"])}function R($,X){var ut;return(ut=$.organizationSaml)==null?void 0:ut.getIn(["entities",X,"entities"])}function U($,X){var ut;return X?(ut=$.organizationScim)==null?void 0:ut.getIn(["entities",X]):(0,f.fromJS)({scim_configured:!1})}function G($,X){var ut;return X?(ut=$.organizationScimMappings)==null?void 0:ut.getIn(["entities",X]):(0,f.fromJS)({groups:[]})}function k($,X){return $.organizations.getIn(["entities",X,"error"])}function at($,X){var ut,lt;let q=(ut=$.organizations)==null?void 0:ut.getIn(["entities",X]);if(q!=null&&q.get("error"))return null;if(q){const B=q.get("id");q=q.merge({accounts:(lt=(0,p.L3)($))==null?void 0:lt.filter(b=>b.get("organization_id")===B)})}return q}function Mt($,X){return V($).find(lt=>lt.get("id")===X)}function Et($,X){var ut;const lt=(ut=$.organizationAccounts)==null?void 0:ut.getIn(["pages",X]),q=lt==null?void 0:lt.get("ids");return!q||!(q!=null&&q.size)?null:q&&q.map(B=>$.organizationAccounts.getIn(["entities",B]))}function j($,X){return $.organizationAccounts.getIn(["pages",X,"isFetching"])}function ot($,X){var ut;const lt=(ut=$.organizationInvoices)==null?void 0:ut.getIn(["pages",X]),q=lt==null?void 0:lt.get("ids");if(!(!q||!(q!=null&&q.size)))return q&&q.map(B=>{var b;return(b=$.organizationInvoices)==null?void 0:b.getIn(["entities",B])})}function St($,X){var ut;return(ut=$.organizationInvoices)==null?void 0:ut.getIn(["pages",X,"isFetching"])}function v($,X){var ut;const lt=(ut=$.organizationReceipts)==null?void 0:ut.getIn(["pages",X]),q=lt==null?void 0:lt.get("ids");return!q||!(q!=null&&q.size)?null:q&&q.map(B=>{var b;return(b=$.organizationReceipts)==null?void 0:b.getIn(["entities",B])})}function Z($,X){var ut;return(ut=$.organizationReceipts)==null?void 0:ut.getIn(["pages",X,"isFetching"])}function st($,X){const ut=Et($,X);return ut==null?void 0:ut.reduce((q,B)=>(q.bandwidth.value+=B.getIn(["bandwidth_usage","used"])||0,q.bandwidth.limit+=B.getIn(["bandwidth_usage","included"])||0,q.buildMinutes.value+=B.getIn(["build_status","minutes","current"])||0,q.buildMinutes.limit+=B.getIn(["build_status","minutes","included_minutes_with_packs"])||0,q.concurrentBuilds.value+=B.getIn(["build_status","active"])||0,q.concurrentBuilds.limit+=B.get("included_concurrent_builds")||0,q.members+=B.get("used_seats")||0,q),{bandwidth:{value:0,limit:0},buildMinutes:{value:0,limit:0},concurrentBuilds:{value:0,limit:0},members:0})}function yt($,X){const ut=$.get("id"),lt=$.get("slug");return(0,E.p5)((q,B,b)=>b.organizationCreateAccount(ut,X).then(()=>{q(h(ut)),q((0,y.VF)(`/organizations/${lt}/overview`))}))}function Pt($,X){const ut=$.get("id");return(0,E.p5)((lt,q,B)=>B.organizationScimAddMapping(ut,X).then(()=>{lt(tt(ut))}))}function vt($,X){const ut=$.get("id"),lt=$.get("slug");return(0,E.p5)((q,B,b)=>b.updateOrganization(ut,X).then(({data:pt})=>{const{logo:mt}=X;mt!==void 0?b.updateOrganizationLogo(ut,mt).catch(Tt=>new m.Z(Tt)):b.deleteOrganizationLogo(ut).catch(Tt=>new m.Z(Tt)),q(a.organizationSuccess(pt));const{slug:At}=pt;At!==lt&&q(M(At)).then(()=>{q((0,r.Ee)(document.location.pathname.replace(`/organizations/${lt}/`,`/organizations/${At}/`))),q(gt())})}))}function Rt($,X){const ut=$.get("id");return(0,E.p5)((lt,q,B)=>B.updateOrganizationPaymentMethod(ut,X.toJS()).then(({data:b})=>(lt(S.Nw.paymentMethodSuccess(b)),lt((0,S.kC)(b.id)),(0,f.fromJS)(b)),b=>(F().notify(b,pt=>{pt.context="organizations \uFE65 updateOrganizationPaymentMethod"}),Promise.reject(b))))}function Kt($,X){const ut=$.get("id");return(0,E.p5)((lt,q,B)=>B.organizationScimUpdateMapping(ut,X).then(()=>{lt(tt(ut))}))}function Lt($){return(0,E.p5)((X,ut,lt)=>lt.deleteOrganizationLogo($.get("id")).then(()=>{X(M($.get("slug")))}).catch(q=>new m.Z(q)))}function Wt($,X){const ut=$.get("id");return(0,E.p5)((lt,q,B)=>B.organizationScimDeleteMapping(ut,X).then(()=>{lt(tt(ut))}))}function Zt($){const X=$.get("id");return(0,E.p5)((ut,lt,q)=>q.organizationScimDeleteConnection(X).then(()=>{ut(x(X))}))}function qt($){const X=$.get("id");return(0,E.p5)((ut,lt,q)=>q.organizationScimDeleteConnectionKeepingUsers(X).then(()=>{ut(x(X))}))}},52968:(ft,z,t)=>{t.d(z,{$9:()=>n,BX:()=>u,DY:()=>e,Nw:()=>E,X_:()=>S,id:()=>d,kC:()=>l,nS:()=>o});var i=t(5780),F=t.n(i),f=t(90046),P=t.n(f),y=t(18432),I=t(91800),m=t(941),p=t(64614);const E=(0,y.P)("paymentMethods"),S=(0,y.x)("paymentMethods",E);function r(c){return(0,p.nY)(c)==="zuora"&&c?c.get("id"):"user"}function a(c){return(0,m.p5)((s,_,g)=>{const O=r(c),L=(0,p.oF)(_(),c);return s(E.paymentMethodsRequest(O)),g.paymentMethods(L).then(J=>s(E.paymentMethodsSuccess(O,J.data,J.pagination)))})}function l(c){return(0,m.p5)((s,_,g)=>c?g.paymentMethod(c).then(O=>s(E.paymentMethodSuccess(O.data))):Promise.resolve())}function o(c){return c!=null&&c.getIn(["user_capabilities","billing","r"])?l(c==null?void 0:c.get("payment_method_id")):(0,m.p5)(()=>Promise.resolve())}function u(c,s){return(0,m.p5)((_,g,O)=>O.savePaymentMethod(c.toJS()).then(L=>(_(E.paymentMethodSuccess(L.data)),_(a(s)),_((0,I.vP)()),(0,f.fromJS)(L.data)),L=>(F().notify(L,J=>{J.context="paymentMethods \uFE65 savePaymentMethod"}),Promise.reject(L))))}function n(c,s){return(0,m.p5)((_,g,O)=>O.removePaymentMethod(c).then(()=>{_(a(s)),_((0,I.vP)())}))}function e(c,s){const _=s&&s.get("payment_method_id");return c.paymentMethods.getIn(["entities",_])}function d(c,s){return c.paymentMethods.getIn(["entities",s])}},71791:(ft,z,t)=>{t.d(z,{E8:()=>g,GV:()=>r,Gr:()=>o,QK:()=>e,WF:()=>s,bl:()=>n,f6:()=>c,iQ:()=>_});var i=t(90046),F=t.n(i),f=t(18643),P=t(18432),y=t(63851),I=t(941),m=t(34571);const p="list-v2",E={NODE_ENV:"production",VERSION_ID:"6491e387b5341c0008548707",SITE_ID:"5f9562c1-be9c-4898-bc6a-5b40de4e1450",CONTEXT:"production",SIFT_BEACON_KEY:"0593578a91",DISABLE_DATADOG_RUM:!1,DATADOG_RUM_APP_ID:"abb8711a-ca04-44e2-bbd6-df0e07a7f3f8",DATADOG_RUM_CLIENT_TOKEN:"pubd771a23f8cb1e4f45f24b5fd37e11a96",DATADOG_RUM_APP_NAME:"netlify-react-ui",DEVCYCLE_CLIENT_SDK_KEY:"dvc_client_7b35e45b_dd67_444b_b114_46804faa770d_ab0f202",MOCK_API:void 0,REACT_APP_QUIET:void 0,REACT_APP_VERSION_ID:"6491e387b5341c0008548707",APP_ENV:"prod",NETLIFY_API_BASE:void 0,ACTION_CABLE_URL:"wss://cablecar.services.netlify.com/cable",BUILD_UTC_TIME:1687282667648,SIGNUP_FORM_REDESIGN_PERCENTAGE:100,NOTRANSLATE_DEBUG:!1}.PLUGINS_URL_OVERRIDE||`https://${p}--netlify-plugins.netlify.app/plugins.json`,S="DEACTIVATED",r="PLUGIN_INSTALL",a=(0,f.Z)(r,(K,M,h)=>({pluginName:K,siteName:M,status:h})),l=(0,P.P)("plugins"),o=(0,P.x)("plugins",l,{key:"package"}),u=K=>{var M;const h=(M=K.compatibility)==null?void 0:M.filter(H=>!H.featureFlag);return{...K,compatibility:h!=null&&h.length?h:null}},n=()=>K=>(K(l.pluginsRequest("plugins")),fetch(E).then(M=>{if(!M.ok){const{status:h,statusText:H}=M;throw new y.Z({status:h,statusText:H,message:"Error fetching plugins"})}return M.json()}).then(M=>{const h=M.map(u);return K(l.pluginsSuccess("plugins",h))}).catch(M=>K(l.pluginsFailure("plugins",M))));function e(K,M,h,H=!0){const rt=h||[];rt.push({package:M});const ct={plugins:rt};return(0,I.p5)((gt,Ot,x)=>x.updateSite(K.get("id"),ct).then(tt=>{gt(a(M,K.get("name"),"success")),gt(m.Nw.siteSuccess(tt.data))}).catch(tt=>(gt(a(M,K.get("name"),"failure")),Promise.reject(new y.Z(tt)))))}const d=K=>K.get("status")!==S;function c(K){const M=K.plugins.get("entities");return M==null?void 0:M.filter(d)}function s(K){return K.plugins.getIn(["pages","plugins","isFetching"])}function _(K){return K.plugins.getIn(["pages","plugins","error"])}function g(K,M){return K.plugins.get("entities").find(h=>h&&h.get("package")===M&&h.get("status")!==S)}const O=K=>M=>{const h=K.get(M.get("package"));return(h==null?void 0:h.merge(M))||M},L=(K,M)=>(K==null?void 0:K.get("name"))>(M==null?void 0:M.get("name"))?1:-1,J=(K,M)=>{const h=K.plugins.get("entities");return(M==null?void 0:M.map(O(h)).sort(L))||List()}},43256:(ft,z,t)=>{t.d(z,{B$:()=>tt,GY:()=>H,I0:()=>rt,Pk:()=>n,Qg:()=>g,Wo:()=>_t,Wq:()=>S,en:()=>Ot,oV:()=>M,pd:()=>u,vD:()=>_,vb:()=>h,yW:()=>x});var i=t(5780),F=t.n(i),f=t(18643),P=t(18432),y=t(63851),I=t(22616),m=t(83360),p=t(65628);const E="REPO_LINK_REQUEST",S="REPO_LINK_SUCCESS",r="REPO_LINK_FAILURE",a="REPO_CREATE_FS",l="REPO_NO_FS",o=(0,P.P)("repos"),u=(0,f.Z)(E,w=>w),n=(0,f.Z)(S,w=>w),e=(0,f.Z)(r,(w,V)=>({full_name:w,error:V})),d=(0,f.Z)(a,(w,V)=>({fs:w,full_name:V})),c=(0,f.Z)(l),s=25;function _({organization:w,hideGitUser:V,page:et,per_page:N=s,installationId:R}){return(0,p.$_)((U,G,k)=>{if(V&&!w)return Promise.resolve();const at=G(),Mt=(0,p.z8)(at),Et=(0,p.Lb)(at),j=Et?k.searchRepos:k.repos;return U(o.reposRequest(w)),j.call(k,{search:Et,organization:w,page:et,per_page:N,installationId:R,gitUser:Mt}).then(ot=>U(o.reposSuccess(w,ot.data,ot.pagination))).catch(ot=>{if(k&&"checkErrorForInvalidToken"in k){const St=k.checkErrorForInvalidToken(ot);if(St)throw new y.Z(St)}})})}function g(w,V){const et=w.get("api_id"),N=w.get("full_name"),R=w.get("organization_name");return(0,p.$_)((U,G,k)=>k.branches({api_id:et,organization_name:R,page:V}).then(({data:at,pagination:Mt})=>{U(o.repoSuccess({full_name:N,branches:w.get("branches").push(...at),branchPagination:Mt}))}))}const O=async({fs:w,repoFiles:V,baseDir:et})=>{const R=V.filter(U=>(U=U.replace(et,""),I.yl.includes(U))).map(async U=>{const G=await w.readFile(U);return[U,G]});return Promise.allSettled(R).then(U=>U.reduce((G,k)=>{if(k.status==="rejected")return G;const[at,Mt]=k.value;return{...G,[at.replace(et,"")]:Mt}},{}))},L=async(w,V)=>{try{return(await w.readDir(V)).map(N=>w.join(V,N))}catch{return[]}},J=w=>w?w.at(-1)==="/"?w:`${w}/`:"",K=async({fs:w,baseDir:V,configFilePath:et,cloningRepo:N=!1})=>{try{const R=et!=null&&et.length?et.replace(/\/?netlify.toml$/,""):V,U=await L(w,R),G=await O({fs:w,repoFiles:U,baseDir:J(R)}),{settings:k,warning:at}=await(0,I.ZP)(U,G,N);return{settings:k,warning:at}}catch(R){return F().notify(R,U=>{var G;U.context="heuristicsForRepoSettings",U.addMetadata("repo",{name:w.details.full_name,branch:w.details.branch,provider:(G=w.git)==null?void 0:G.provider}),U.severity="info"}),{settings:{}}}};function M(w){const V=w.get("api_id"),et=w.get("full_name"),N=w.get("default_branch"),R=w.get("organization_name");return(0,p.$_)(async(U,G,k)=>{const{data:at,pagination:Mt}=await k.branches({api_id:V,organization_name:R}).catch(j=>{F().notify(j,ot=>{ot.context="prepareRepo",ot.addMetadata("repo",{name:et,branch:N,provider:k.provider}),ot.severity="info"}),U(o.repoFailure(et,new y.Z(`We couldn\u2019t access the repository ${et}. This could be because the repository is empty or disabled.`)))}),Et=new m.R(k,{organization_name:R,api_id:V,full_name:et,branch:N});U(d(Et,et)),U(o.repoSuccess({full_name:et,branches:at,branchPagination:Mt}))})}function h(w){return ct(w,async(V,et,N)=>{const R=N.details.full_name;try{const U=await K({fs:N,baseDir:""});V(o.repoSuccess({full_name:R,...U}))}catch(U){U instanceof Error&&F().notify(U,G=>{G.context="prepareRepo",G.addMetadata("repo",{name:N,branch:N.details.branch,provider:N.git.provider}),G.severity="info"}),V(o.repoFailure(R,new y.Z(`We couldn\u2019t access the repository ${R}. This could be because the repository is empty or disabled.`)))}})}function H(w,V){return(V?N=>(0,p.Fq)(V,N):p.$_)((N,R,U)=>(N(o.repoRequest(w)),U.repo(w).then(({data:G})=>{const k=new m.R(U,{organization_name:G.organization_name,api_id:G.api_id,full_name:w,branch:G.default_branch});return K({fs:k,baseDir:"",cloningRepo:!0}).then(at=>N(o.repoSuccess({...G,...at})))}).catch(G=>{const k=new y.Z(G);throw N(o.repoFailure(w,k)),k})))}function rt(w,V,et={}){return ct(w,(N,R,U)=>{const G=U.details.full_name;return U.details.branch!==V&&U.changeBranch(V),K({fs:U,configFilePath:et.configFilePath,baseDir:et.baseDir||""}).then(k=>N(o.repoSuccess({full_name:G,...k}))).catch(k=>N(o.repoFailure(G,new y.Z(`We couldn\u2019t access the branch ${V} on repository ${G}. This could be because some files have format errors.`))))})}function ct(w,V){return async(et,N)=>{const R=W(N(),w.get("full_name"));return R?V(et,N,R):et(c())}}function gt(w,V){switch(V.type){case E:return w.set("linking",!0).setIn(["entities",V.payload,"linking"],!0);case r:return w.set("linking_error",V.payload.error).setIn(["entities",V.payload.api_id,"link_error"],o.payload.error);case S:return w.set("linking",null).setIn(["entities",V.payload,"linking"],null);case a:return w.setIn(["entities",V.payload.full_name,"fs"],V.payload.fs);default:return null}}const Ot=(0,P.x)("repos",o,{key:"full_name",handler:gt});function x(w,V){const et=w.repos.getIn(["pages",V,"ids"]);return et&&et.map(N=>_t(w,N))}function tt(w,V){return w.repos.getIn(["pages",V])}function _t(w,V){return w.repos.getIn(["entities",V])}function W(w,V){return w.repos.getIn(["entities",V,"fs"])}function Q(w,V){return w.repos.getIn(["entities",V,"isFetching"])}},87430:(ft,z,t)=>{t.d(z,{SE:()=>E,XK:()=>p,Zz:()=>S,e7:()=>u,jW:()=>l,rB:()=>m});var i=t(68854),F=t(40917),f=t(91800),P=t(941),y=t(60653),I=t(93716);const m="next";function p({account:n,url:e,data:d}){const c=n.get("slug");return(0,P.p5)((s,_,g)=>g.updateSamlConfig(c,e,d).then(O=>s((0,f.Mx)(c))))}function E(n){const e=n.get("slug");return(0,P.p5)((d,c,s)=>s.deleteSamlConfig(e).then(_=>d((0,f.Mx)(e))))}function S(n,e){return(0,P.p5)((d,c,s)=>s.getSamlStartUrl(n).then(_=>{const g=new URL(_.data.sp_start_url);g.searchParams.append("redirect",window.location.origin),g.searchParams.append("tracking_session_id",e),document.location=g.href}))}function r({user:n,slug:e}){return(0,P.p5)((d,c,s)=>s.user().then(_=>{n={..._.data,...n};const g=e?`/teams/${e}`:"/";d({type:y.Wb}),d((0,y.pH)(n)),d((0,I.Ee)(g))}))}function a({user:n,slug:e,redirect:d}){return(0,P.p5)((c,s,_)=>_.user().then(g=>{n={...g.data,...n},c({type:y.Wb}),c((0,y.pH)(n)),c((0,I.Ee)(d))}))}function l({token:n,slug:e}){return async(d,c)=>{window.location.hash="";const s={access_token:n};await(0,F.sV)({access_token:s.access_token});const _=(0,i.St)(m);(0,i.lD)(m),_&&(0,y.Bh)(_)?d(a({user:s,slug:e,redirect:_})):d(r({user:s,slug:e}))}}function o({user:n,saml_slug:e}){return(0,P.p5)((d,c,s)=>s.user().then(_=>{n={..._.data,...n};const g=e?`/teams/${e}`:"/";d({type:y.Wb}),d((0,y.pH)(n)),d((0,I.Ee)(g))}))}function u({access_token:n,saml_slug:e}){return async(d,c)=>{window.location.hash="";const s={access_token:n};await(0,F.sV)({access_token:s.access_token}),d((0,y.pH)(s)),d(o({user:s,saml_slug:e}))}}},67321:(ft,z,t)=>{t.d(z,{$b:()=>I,wT:()=>m});var i=t(63851),F=t(91800),f=t(941),P=t(34571);const y=(p,E)=>{const S=[],r={instance_url:{gitlab_self_hosted:"There is a problem with your instance URL; please review it.",github_enterprise:"There is a problem with your instance URL; please review it."},app_id:{github_enterprise:"Your app ID and/or private key are incorrect; please review them."},pem_file:{github_enterprise:"Your app ID and/or private key are incorrect; please review them."},client_id:{gitlab_self_hosted:"Your app ID is incorrect; please review it.",github_enterprise:"Your client ID is incorrect; please review it."},client_secret:{gitlab_self_hosted:"Your secret is incorrect; please review it.",github_enterprise:"Your client secret is incorrect; please review it."},webhook_secret:{github_enterprise:"Your webhook secret is incorrect; please review it."}};for(const a of Object.keys(p))r[a]&&S.push(r[a][E]);return S.length?S.length===1?`**Connection failed.** ${S[0]}`:`**Connection failed:** 

* `+S.join(`
* `):p},I=(p,E,S)=>{const r=p.get("id"),a=p.get("slug");return(0,f.p5)((l,o,u)=>u.updateSelfHostedGitConfig(r,E,S).then(({data:n})=>{l((0,F.Mx)(a)),l((0,P.KZ)({accountSlug:a}))}).catch(n=>{const e=y(n,S);throw new i.Z(e)}))},m=(p,E)=>{const S=p.get("id"),r=p.get("slug");return(0,f.p5)((a,l,o)=>o.deleteSelfHostedGitConfig(S,E).then(({data:u})=>{a((0,F.Mx)(r)),a((0,P.KZ)({accountSlug:r}))}).catch(u=>{throw new i.Z(u)}))}},57240:(ft,z,t)=>{t.d(z,{G6:()=>l,M2:()=>r,Pg:()=>u,RA:()=>c,k3:()=>e,k4:()=>o,uZ:()=>E,wo:()=>n});var i=t(18432),F=t(40917),f=t(941),P=t(60653),y=t(99647),I=t(44195),m=t(34571);const p=(0,i.P)("services"),E=(0,i.x)("services",p);function S(s,_){return s.services.getIn(["entities",_])}function r(s,_){const g=s.services.getIn(["pages",_.get("id"),"ids"]);return g&&g.map(O=>S(s,O))}function a(s){return s.get("service_path").replace("/.netlify/","")}function l(s,_,g={}){return(0,f.p5)((O,L,J)=>J.createService(s.get("id"),_,g).then(K=>p.serviceSuccess(K.data)).then(()=>O(o(s))))}function o(s){const _=s.get("id");return(0,f.p5)((g,O,L)=>L.services(_).then(J=>g(p.servicesSuccess(_,J.data))))}function u(s,_,g){return(0,f.p5)((O,L,J)=>J.updateService(s.get("id"),a(_),_.get("id"),{config:g}).then(()=>O(o(s))))}function n(s,_){return(0,f.p5)((g,O,L)=>L.deleteService(s.get("id"),a(_),_.get("id")).then(()=>g(o(s))))}function e(s,_){return(0,f.vd)((g,O,L,J)=>{switch(_){case"cms":return Promise.all([g((0,I.XD)(s,{disable_signup:!0})),g(l(s,"git",{[J.provider]:{access_token:J.token,repo:s.getIn(["build_settings","repo_url"]).replace(/^https:\/\/[^/]+\//,"")}}))]).then(K=>g(d(s)));case"fauna":return g(l(s,"fauna",{}));case"nimbella":return g(l(s,"nimbella",{}));default:return Promise.resolve()}})}function d(s){return(_,g)=>{const O=g(),L=(0,P.HF)(O),J={email:L.get("email"),data:{full_name:L.get("full_name")}};return s=(0,m.lH)(O,s.get("name")),_((0,I.cG)(s,[J]))}}function c(s,_){return(0,f.p5)((g,O,L)=>{const J=O(),K=(0,y.Ji)(J),M=(0,y.vv)(J),h=new F.ZP({site_id:K,base_url:M});return new Promise((H,rt)=>h.authenticate({provider:s,scope:_},(ct,gt)=>{ct?rt(ct):H(gt.token)}))})}},34571:(ft,z,t)=>{t.d(z,{$2:()=>B,CJ:()=>jt,CX:()=>b,Cu:()=>Tt,DS:()=>qt,EQ:()=>Wt,Er:()=>ae,G$:()=>Se,GQ:()=>Oe,Go:()=>R,IS:()=>zt,KZ:()=>T,L3:()=>Ct,LR:()=>x,LZ:()=>Ot,Mo:()=>X,Nw:()=>et,OH:()=>pt,OK:()=>Te,Pr:()=>ue,UJ:()=>Ee,UQ:()=>Bt,Un:()=>Le,VI:()=>v,WV:()=>ut,ZO:()=>mt,Z_:()=>Dt,aO:()=>$,c7:()=>At,cP:()=>ve,eZ:()=>tt,f:()=>gt,gG:()=>he,hK:()=>Be,lH:()=>ee,mV:()=>ge,mY:()=>De,mh:()=>Me,n:()=>Ce,rC:()=>Pe,tI:()=>Ie,tc:()=>ye,u:()=>Re,u5:()=>Zt,wM:()=>Jt,xb:()=>Ut});var i=t(90046),F=t.n(i),f=t(54969),P=t.n(f),y=t(19271),I=t(18643),m=t(18432),p=t(19349),E=t(63851),S=t(68854),r=t(88317),a=t(95972),l=t(68187),o=t(941),u=t(60653),n=t(84673),e=t(86025),d=t(38086),c=t(65628),s=t(43256),_=t(57240),g=t(93716);const O="BRANCHES_SUCCESS",L="DEPLOY_KEY_SUCCESS",J="DNS_ZONE_SUCCESS",K="ALL_DNS_ZONES_SUCCESS",M="SITE_CREATED",h="SITES_CLEAR_PAGES",H="SITE_FIREWALL_RULE_SET_SUCCESS",rt="SNIPPETS_REQUEST",ct="SNIPPETS_SUCCESS",gt="DEPLOY_DONE",Ot="DEPLOY_ERROR",x="DIRECT_DEPLOY_LANDING",tt="DIRECT_DEPLOY_SUCCESS",_t="SUBSCRIPTION_CANCELED",W="USAGE_RECORDS_SUCCESS",Q="USAGE_RECORD_SUCCESS",w="APP_INSTALL_SUCCESS",V="DNS_CONFIG_CHECKED",et=(0,m.P)("sites"),N=(0,I.Z)(M,D=>D),R=(0,I.Z)(h),U=(0,I.Z)(H,(D,A)=>({name:D,firewall_rule_set:A})),G=(0,I.Z)(rt,D=>D),k=(0,I.Z)(ct,(D,A)=>({name:D,snippets:A})),at=(0,I.Z)(O,(D,A)=>({name:D,branches:A})),Mt=(0,I.Z)(J,(D,A)=>({name:D,dnsZone:A})),Et=(0,I.Z)(K,(D,A)=>({name:D,dnsZones:A})),j=(0,I.Z)(L,(D,A)=>({name:D,deployKey:A})),ot=(0,I.Z)(gt),St=(0,I.Z)(Ot,D=>D),v=(0,I.Z)(x,()=>{}),Z=(0,I.Z)(tt,D=>D),st=(0,I.Z)(_t,D=>D),yt=(0,I.Z)(W,(D,A)=>({name:D,records:A})),Pt=(0,I.Z)(Q,(D,A)=>({name:D,record:A})),vt=(0,I.Z)(w,(D,A)=>({name:D,installationId:A})),Rt=(0,I.Z)(V,(D,A)=>({name:D,dnsVerified:A})),Kt=5,Lt=(0,i.Map)({isFetching:!0});function Wt(D){return(0,o.p5)((A,Y,nt)=>(A(et.siteRequest(D)),nt.site(D).then(it=>A(et.siteSuccess(it.data))).catch(it=>A(et.siteFailure(D,it))).then(it=>ee(Y(),D))))}function Zt(D){return(0,o.p5)((A,Y,nt)=>{const it=ee(Y(),D);it&&nt.siteFirewallRuleSet(it.get("site_id")).then(It=>{A(U(D,It.data))}).catch(It=>{(It==null?void 0:It.code)===404&&A(U(D,{published:{default:"allow",rules:[]},unpublished:{default:"allow",rules:[]}}))})})}function qt(D,A){return(0,o.p5)((Y,nt,it)=>{const ht=ee(nt(),D).get("site_id");return it.updateSiteFirewallRuleSet(ht,A).then(()=>{Y(Zt(D))})})}function $(D,A){return(Y,nt)=>fetch(`/.netlify/functions/verify?domain=${A}`).then(it=>it.json().then(It=>{if(!it.ok)throw new E.Z(It.error||"Error fetching DNS config");return It})).then(it=>{const It={glo:"global",global:"global",packet:"packet",pkt:"packet",reg:"regular",regular:"regular"},ht=it.results.map(Ft=>Ft.cdnTier),wt=D.getIn(["capabilities","cdn_tier"]);wt==="custom"?Y(Rt(D.get("name"),"custom")):ht.every(Ft=>["global","regular","packet"].includes(Ft))&&(ht.every(Ft=>Ft===It[wt]||Ft==="packet")?Y(Rt(D.get("name"),"success")):Y(Rt(D.get("name"),"failed")))}).catch(it=>console.error("Error while checkDNSconfig:",it))}function X(D){return(0,o.p5)((A,Y,nt)=>nt.siteById(D).then(it=>A(et.siteSuccess(it.data))).catch(it=>{A(et.siteFailure(D,it))}))}function ut(D){return(0,o.p5)((A,Y,nt)=>nt.branches(D.get("id")).then(it=>(A(at(D.get("name"),it.data)),fe(Y(),D.get("name")))).catch(it=>it&&it.code===401?(A(at(D.get("name"),[])),fe(Y(),D.get("name"))):Promise.reject(it)))}const lt=({customApexDomain:D,customSubdomain:A,allDnsZones:Y})=>{const nt=(A==null?void 0:A.split("."))||[],it=[];return nt.forEach((It,ht)=>{if(ht===nt.length-1)it.push(`${It}.${D}`);else{const wt=nt.slice(ht+1);it.push(`${It}.${wt.join(".")}.${D}`)}}),it.push(D),q(it,Y)};function q(D,A){if(D.length===0||A.length===0)return;const Y=A.find(nt=>nt.name===D[0]);return Y||(D.shift(),q(D,A))}function B(D,A){var Y;const nt=D.get("custom_domain"),it=((Y=D.get("domain_aliases"))==null?void 0:Y.toJS())||[],It=D.get("deploy_preview_custom_domain"),ht=D.get("branch_deploy_custom_domain"),wt=[nt,It,ht,...it].filter(Nt=>!!Nt),Ft=A&&A.get("slug")||null;return(0,o.p5)((Nt,Yt,Qt)=>Qt.dnsZones(Ft).then(({data:ce})=>{const Gt={};wt.forEach(async kt=>{await(0,a.hh)(kt).then(Ht=>{const xt=lt({customApexDomain:`${Ht==null?void 0:Ht.domain}.${Ht==null?void 0:Ht.tld}`,customSubdomain:Ht==null?void 0:Ht.subdomain,allDnsZones:ce});xt?(Gt[kt]=xt,Nt((0,e.pZ)(xt.name))):Gt[kt]={error:"DNS zone not found",name:kt}}),Nt(Et(D.get("name"),Gt))})}))}function b(D,A){const Y=A.get("dns_zone");return Y==null?void 0:Y.set("records",(0,e.od)(D,Y.get("name")))}function pt(D,A){const Y=A.get("dns_zones");if(!Y)return(0,i.fromJS)({});const nt=Y.toJS();return Object.keys(nt).forEach(it=>{nt[it].records=(0,e.od)(D,nt[it].name)}),(0,i.fromJS)(nt)}function mt(D){return(0,o.p5)((A,Y,nt)=>nt.siteUsage(D.get("id")).then(it=>A(yt(D.get("name"),it.data))))}function At(D,{id:A,plan:Y}){return(0,o.p5)((nt,it,It)=>It.changeAddonPlan(A,Y,D.get("id")).then(ht=>nt(Pt(D.get("name"),ht.data))))}function Tt(D){return(0,o.p5)((A,Y,nt)=>nt.siteSnippets(D.get("id")).then(it=>A(k(D.get("name"),it.data))))}function Bt(D,A){return(0,o.p5)((Y,nt,it)=>it.siteSnippetRemove(D.get("id"),A.get("id")).then(It=>Y(Tt(D))))}function zt(D,A){return(0,o.p5)((Y,nt,it)=>it.siteSnippetAdd(D.get("id"),A).then(It=>Y(Tt(D))))}function Jt(D){return(0,o.p5)((A,Y,nt)=>{const it=ee(Y(),D);if(!it||it.get("screenshot_fetching")||it.get("isFetching"))return;A(et.siteSuccess({name:D,screenshot_fetching:!0}));let It=0;const ht=()=>(It++,new Promise((wt,Ft)=>{nt.site(D).then(Nt=>{Nt.data.screenshot_url?wt(A(et.siteSuccess(Nt.data))):It<=5&&setTimeout(ht,1e3)})}));return ht()})}function C(D={}){return`sites-${D.accountSlug}${D.searchTerm?`-${D.searchTerm}`:""}`}function T(D){const A=C(D);return(0,o.p5)((Y,nt,it)=>(Y(et.sitesRequest(A)),it.sites(D).then(It=>Y(et.sitesSuccess(A,It.data,It.pagination)))))}async function dt(D,A={},Y){if(Object.keys(A).length>0){try{await Y.createEnvVars({accountId:D.account_slug,siteId:D.id,envVars:(0,p.EJ)(A)})}catch{}return D}return D}function Ct(D,A){const Y=D.get("name");return(0,o.p5)((nt,it,It)=>It.updateSite(D.get("id"),A).then(ht=>{if(nt(R()),nt(et.siteSuccess(ht.data)),ht.data.name!==Y){const wt=window.location.pathname.replace(`/sites/${Y}/`,`/sites/${ht.data.name}/`);nt((0,g.Ee)(wt))}return ee(it(),Y)}).catch(ht=>{var wt,Ft;if((wt=ht.errors)!=null&&wt.branch_deploy_custom_domain||(Ft=ht.errors)!=null&&Ft.deploy_preview_custom_domain){const Nt=(0,l.TQ)(ht.errors);if(Nt)throw new E.Z(Nt)}throw typeof ht.errors=="string"?new E.Z({message:ht.errors}):ht}))}function Dt(D){return(0,o.p5)((A,Y,nt)=>nt.unlinkSiteRepository(D).then(it=>(A(R()),A(et.siteSuccess(it.data)))))}function Ut(D){return(0,o.p5)((A,Y,nt)=>nt.deleteSite(D.get("id")).then(it=>{A(R()),A((0,y.VF)("/"))}))}function te(D){return(0,o.p5)((A,Y,nt)=>(0,c.$_)((it,It,ht)=>D(A,Y,nt,ht))(A,Y))}const oe=D=>{var A;const Y=(A=D.getIn(["settings","plugins"]))==null?void 0:A.toJS();return Y!=null&&Y.length?Y:[]},se=D=>!(r.Lz[D]===r.Lz.azure_devops||r.Lz[D]===r.Lz.gitlab||r.Lz[D]===r.Lz.gitlab_self_hosted);function ae(D,A,Y,nt=""){const it=A.get("api_id"),It=A.get("full_name"),ht=A.get("full_name_encoded"),wt=A.get("private"),Ft=A.get("installation_id"),Nt=A.get("owner_type"),Yt=Y.account_slug,Qt=A.get("project_id"),ce=A.get("organization_name");return te((Gt,kt,Ht,xt)=>{const Vt=xt.provider===r.Lz.github_app?r.Lz.github:xt.provider,bt=kt().git,Xt=r.Lz[Vt]===r.Lz.azure_devops,le=r.Lz[Vt]===r.Lz.gitlab||r.Lz[Vt]===r.Lz.gitlab_self_hosted,de=r.Lz[Vt]===r.Lz.bitbucket||r.Lz[Vt]===r.Lz.bitbucket_self_hosted,_e=se(Vt),re={provider:Vt,installation_id:Ft,id:A.get("id"),owner_type:Nt,repo:ht||It,private:wt,...Y};Xt&&(re.azure_refresh_token=bt.get("refreshAccessToken")),le&&(re.gitlab_refresh_token=bt.get("refreshAccessToken")),de&&(re.bitbucket_refresh_token=bt.get("refreshAccessToken")),delete re.account_slug;const{env:Ke}=re;delete re.env;const We=D?$t=>Ht.updateSite(D.get("id"),$t):$t=>Ht.createSite({account_slug:Yt,...$t,created_via:nt});return Gt((0,s.pd)(It)),(Ft||Xt?Promise.resolve():Ht.createDeployKey().then($t=>xt.addDeployKey(it,$t.data,!0,A.get("organization_name"))).catch($t=>{var ie;const me=(ie=xt==null?void 0:xt.checkErrorForInvalidToken)==null?void 0:ie.call(xt,$t);throw me?new E.Z(me):new E.Z("We couldn\u2019t set up continuous deployment for this repository. This typically happens when you don\u2019t have admin rights to the repository.")})).then($t=>We({repo:{...re,deploy_key_id:$t&&$t.id},..._e&&{default_hooks_data:Ft?{}:{access_token:xt.token}},plugins:oe(A)})).then($t=>xt.addWebhook({api_id:it,site:$t.data,organization_name:ce,project_id:Qt})).then(async $t=>await dt($t,Ke,Ht)).then($t=>Ht.deploys($t.id,{page:1,per_page:1}).then(ie=>(Gt((0,u.fq)()),Gt((0,s.Pk)(It)),Gt(R()),Gt(et.siteSuccess($t)),Gt(n.Nw.deploysSuccess($t.id,ie.data,[])),{site:$t,deploy:ie.data[0]})))})}function jt(D){const A={};return D.forEach(Y=>{A[Y.path]=Y.sha}),A}function ne(D){const A={};return D.forEach(Y=>{A[Y]=!0}),A}function ue(D,A,Y,nt){const it=ne(A.required),It=P()(Kt);return Promise.all(Y.map(ht=>it[ht.sha]&&It(()=>D.uploadFile(A.deploy_id||A.id,ht.path,ht.content,nt))).filter(Boolean))}function ge(D,A,Y=!1){const nt=D.get("id"),it=D.get("name"),It=jt(A);return(0,o.p5)((ht,wt,Ft)=>Ft.createDeploy(nt,{files:It}).then(Nt=>{const Yt=Nt.data;return ht(n.Nw.deploysSuccess(nt,[Yt])),(0,S.D$)("dropSiteName",it),(0,S.D$)("dropDeployId",Yt==null?void 0:Yt.id),Yt}).then(Nt=>ue(Ft,Nt,A).then(()=>Ft.waitForDeploy(Nt.id)).then(Yt=>Yt.data)).then(Nt=>Ft.site(it).then(Yt=>{ht(R()),ht(et.siteSuccess(Yt.data)),ht(n.Nw.deploysSuccess(nt,[Nt]))}).then(Yt=>{if(Y)ht(Jt(D.get("name"))),ht((0,y.VF)(`/drop/${D.get("name")}`));else{let Qt=`/sites/${it}`;Nt!=null&&Nt.id&&(Qt+=`/deploys/${Nt==null?void 0:Nt.id}`),ht((0,y.VF)(Qt)),(0,d.Te)()}return Yt})))}function Ee(D,A=""){return(0,o.p5)((Y,nt,it)=>it.createSite({account_slug:D,created_via:A}).then(({data:It})=>(Y(et.siteSuccess(It)),ee(nt(),It.name))))}function Se(){return(0,o.p5)((D,A,Y)=>Y.createDeployKey().then(nt=>nt.data).catch(nt=>{throw new E.Z("Error generating a new deploy key.",nt)}))}function Pe(D,A){return(0,o.p5)((Y,nt,it)=>it.getDeployKey(D).then(It=>Y(j(A.get("name"),It.data))).catch(It=>{throw new E.Z("Error getting the deploy key.",It)}))}function De(D,A){const Y=A.get("name");return D.sites.getIn(["entities",Y]).get("deploy_key")||null}function Ie(D,A,Y,nt,it=!1,It=""){const ht=A.get("default_branch"),wt={path:A.get("full_name"),slug:A.get("full_name").replace(/\//,"-"),authorized_url:`https://${A.get("provider")}.com/${A.get("full_name")}`,branch:ht},Ft=A.get("settings").toJS(),{env:Nt}=Ft;delete Ft.env;const Yt={name:Y,private:it};return te((Qt,ce,Gt,kt)=>{Qt((0,s.pd)(Y));const Ht=se(kt.provider);return Gt.createTemplate(wt).then(xt=>xt.data).then(xt=>kt.createRepo(Yt).then(Vt=>Gt.createDeployKey().then(bt=>bt.data).then(bt=>kt.addDeployKey(Vt.full_name,bt,!1,A.get("organization_name"))).then(bt=>Gt.createSite({account_slug:D,no_initial_build:!0,template_id:xt.id,repo:{provider:kt.provider,branch:ht,id:Vt.id,repo:Vt.full_name,deploy_key_id:bt.id,...Ft,private:Vt.private},...Ht&&{default_hooks_data:{access_token:kt.token}},plugins:oe(A),created_via:It}).then(Xt=>Xt.data)).then(bt=>kt.addWebhook({api_id:Vt.api_id,site:bt,organization_name:A.get("organization_name")})).then(async bt=>await dt(bt,Nt,Gt)).then(bt=>Ae(bt,A.getIn(["settings","template","incoming-hooks"])||[],Gt)).then(bt=>Qt((0,_.k3)((0,i.fromJS)(bt),nt)).then(Xt=>bt)).then(bt=>Gt.triggerDeploy(bt.id,!1,xt.id).then(Xt=>({site:bt,build:Xt}))).then(({site:bt,build:Xt})=>{var le,de;Qt((0,s.Pk)(Vt.full_name)),Qt(Z(bt)),Qt(Wt(bt.name));let _e=`/sites/${bt.name}`;(le=Xt==null?void 0:Xt.data)!=null&&le.deploy_id&&(_e+=`/deploys/${(de=Xt==null?void 0:Xt.data)==null?void 0:de.deploy_id}`),Qt((0,g.Ee)(_e))})))})}function Oe(D,A){return(0,o.p5)((Y,nt,it)=>(Y(et.siteRequest(D.get("name"))),it.transferSite(D.get("id"),A.get("id")).then(It=>(Y(R()),Y(et.siteSuccess(It.data))))))}function Ae(D,A,Y){return A.map(nt=>Y.addBuildHook(D.id,{title:nt})),D}function Me(D,A){return(Y,nt)=>Y(vt(D.get("name"),A))}const ye=(0,m.x)("sites",et,{key:"name",handler:(D,A)=>{switch(A.type){case h:return D.delete("pages");case rt:return D.setIn(["entities",A.payload,"snippets","isFetching"],!0);case ct:return D.setIn(["entities",A.payload.name,"snippets"],(0,i.fromJS)(A.payload.snippets));case H:return D.setIn(["entities",A.payload.name,"firewall_rule_set"],(0,i.fromJS)(A.payload.firewall_rule_set));case O:return D.setIn(["entities",A.payload.name,"branches"],(0,i.fromJS)(A.payload.branches));case L:return D.setIn(["entities",A.payload.name,"deploy_key"],A.payload.deployKey.public_key);case J:return D.setIn(["entities",A.payload.name,"dns_zone"],(0,i.fromJS)(A.payload.dnsZone));case K:return D.setIn(["entities",A.payload.name,"dns_zones"],(0,i.fromJS)(A.payload.dnsZones));case _t:return D.deleteIn(["entities",A.payload.getIn(["site","name"]),"paid_individual_site_subscription"]);case W:return D.setIn(["entities",A.payload.name,"plans"],(0,i.fromJS)(A.payload.records).reduce((Y,nt)=>Y.set(nt.get("type"),nt),(0,i.Map)()));case Q:return D.updateIn(["entities",A.payload.name],Y=>Y.setIn(["plans",A.payload.record.type],(0,i.fromJS)(A.payload.record)));case V:return D.updateIn(["entities",A.payload.name],Y=>Y.set("dnsVerified",A.payload.dnsVerified));case w:return D.setIn(["entities",A.payload.name,"build_settings","installation_id"],A.payload.installationId);default:return null}}});function ve(D){return(0,o.ac)(D).sites}function ee(D,A,Y=!1){const nt=D.sites.getIn(["entities",A]);return nt?nt&&nt.get&&nt.get("id")?nt:Y?nt.get&&nt||Lt.set("name",A):null:null}function he(D,A){return D.sites.get("entities").find(Y=>Y.get("id")===A)}function pe(D,A){const Y=Number(A.page)||1,nt=D.sites.getIn(["pages",C(A)]),it=(nt==null?void 0:nt.get("current"))||1;return!(nt!=null&&nt.get("isFetching"))&&it===Y?nt:null}function Re(D,A){const Y=pe(D,A);return Y==null?void 0:Y.get("ids").map(nt=>ee(D,nt))}function Ce(D,A={}){var Y;return(Y=D.sites)==null?void 0:Y.getIn(["pages",C(A),"isFetching"])}function Te(D,A={}){return pe(D,A)}function Ue(D,A){return A&&A.get("branches")}function fe(D,A){var Y;return(Y=ee(D,A))==null?void 0:Y.get("branches")}function Le(D,A){const Y=Ue(D,A),nt=A.getIn(["build_settings","repo_branch"]),it=Y&&Y.map(It=>It.get("name")).filter(It=>It!==nt);return it&&it.unshift(nt)}function Fe(D){return D.sites.get("search")}const Be=D=>A=>A(et.siteSuccess(D))},28051:(ft,z,t)=>{t.d(z,{Vt:()=>y});var i=t(18432),F=t(941),f=t(34571);const P=(0,i.P)("subscriptions"),y=(0,i.x)("subscriptions",P);function I(a){return withApi((l,o,u)=>(l(P.subscriptionsRequest("subscriptions")),u.newSubscription(a).then(n=>l(P.subscriptionSuccess(n.data)))))}function m(a){return withApi((l,o,u)=>(l(P.subscriptionsRequest("subscriptions")),u.cancelSubscription(a.get("id")).then(()=>l(subscriptionCanceled(a)))))}function p(a,l){return withApi((o,u,n)=>{o(P.subscriptionsRequest("subscriptions"));const e={payment_method_id:l};return n.updateSubscription(a,e).then(d=>o(P.subscriptionSuccess(d.data)))})}function E(a){return withApi((l,o,u)=>(l(P.subscriptionsRequest("subscriptions")),u.getSubscriptions(a).then(n=>l(P.subscriptionsSuccess(a,n.data)),n=>l(P.subscriptionsFailure(a,n.message)))))}function S(a,l){const o=a.subscriptions.getIn(["entities"]);return o&&o.find(u=>r(u)&&u.get("type")==="site"&&u.get("site_id")===l)}function r(a){return a.get("state")==="active"||a.get("state")==="past_due"||a.get("zuora_migrated")&&!a.get("zuora_canceled")}},670:(ft,z,t)=>{t.d(z,{IP:()=>P,K$:()=>m,XT:()=>S,iH:()=>I});var i=t(18432),F=t(941);const f=(0,i.P)("teamAudits"),P=(0,i.x)("teamAudits",f);function y(r,a){return r.teamAudit.getIn(["entities",a])}function I(r,a){const l=r.teamAudit.getIn(["pages",E(a),"ids"]);return l&&l.map(o=>y(r,o))}function m(r,a){return r.teamAudit.getIn(["pages",E(a)])}function p(r,a){return r.teamAudit.getIn(["pages",E(a),"current"])}function E(r={}){return`${r.accountSlug}${r.search?`-${r.search}`:""}`}function S(r={}){return(0,F.p5)((a,l,o)=>o.teamAudit(r).then(u=>{a(f.teamAuditsSuccess(E(r),u.data,u.pagination))}))}},38751:(ft,z,t)=>{t.d(z,{GO:()=>f,IK:()=>F,Kq:()=>m,L9:()=>y,qX:()=>P});var i=t(18643);const F="TRACK",f="IDENTIFY",P="PAGE",y=(0,i.Z)(F,p=>p),I=(0,i.Z)(f,p=>p),m=(0,i.Z)(P,()=>({}))},45988:(ft,z,t)=>{t.d(z,{Dk:()=>l,Fz:()=>S,VO:()=>d,af:()=>n,m6:()=>e,rU:()=>p,vj:()=>u});var i=t(90046),F=t.n(i),f=t(18643),P=t(18432),y=t(941);const I="TRAFFICSPLIT_TOGGLE",m=(0,P.P)("trafficSplits"),p=(0,P.x)("trafficSplits",m,{handler:(c,s)=>{switch(s.type){case"TRAFFICSPLIT_SUCCESS":return c.setIn(["entities",s.payload.id],(0,i.fromJS)(s.payload));case I:return c.setIn(["entities",s.payload.splitId,"active"],s.payload.active);default:return null}}});function E(c,s){return c.trafficSplits.getIn(["entities",s])}function S(c,s){const _=c.trafficSplits.getIn(["pages",a(s),"ids"]);return _&&_.map(g=>E(c,g))}const r=(0,f.Z)("TRAFFICSPLIT_TOGGLE",(c,s)=>({splitId:c,active:s}));function a(c){return c&&c.get("id")}function l(c){const s=a(c);return(0,y.p5)((_,g,O)=>O.trafficSplits(s).then(L=>_(m.trafficSplitsSuccess(s,L.data))))}function o(c,s){const _=a(c);return withApi((g,O,L)=>L.trafficSplit(_,s).then(J=>g(m.trafficSplitSuccess(J.data))))}function u(c,s){const _=a(c);return(0,y.p5)((g,O,L)=>L.createTrafficSplit(_,s).then(J=>{g(m.trafficSplitSuccess(J.data)),g(l(c))}))}function n(c,s,_){const g=a(c);return(0,y.p5)((O,L,J)=>J.updateTrafficSplit(g,s,_).then(K=>{O(m.trafficSplitSuccess(K.data))}))}function e(c,s){return(0,y.p5)((_,g,O)=>O.startTrafficSplit(a(c),s).then(L=>{_(r(s,!0)),_(l(c))}))}function d(c,s){return(0,y.p5)((_,g,O)=>O.stopTrafficSplit(a(c),s).then(L=>{_(r(s,!1)),_(l(c))}))}},79954:(ft,z,t)=>{t.d(z,{f:()=>i});var i=(F=>(F.all="all",F.nonProduction="non_production",F))(i||{})},93716:(ft,z,t)=>{t.d(z,{Ee:()=>o,FY:()=>s,Gh:()=>M,Ic:()=>J,Jh:()=>c,K4:()=>_,Qf:()=>g,TW:()=>L,X_:()=>O,_P:()=>u,jS:()=>d,qC:()=>e,ui:()=>l});var i=t(90046),F=t.n(i),f=t(19271),P=t(941),y=t(34571),I=t(38751);const m="SET_A11Y_MESSAGE",p="SET_LOADING",E="SET_ROUTE_PATH",S="SET_DISPLAY_GUIDED_ONBOARDING",r="SHOW_FIRST_DEPLOY_MODAL",a="SITES_NAV_LIST_SUCCESS",l=(h=(0,i.Map)(),H)=>{switch(H.type){case m:return h.setIn(["ui","a11yMessage"],H.message);case p:return h.setIn(["ui","loading"],H.loading);case E:return h.setIn(["ui","routePath"],H.routePath);case S:return h.setIn(["ui","displayGuidedOnboarding"],H.displayGuidedOnboarding);case r:const{show:rt}=H,ct=H.data||h.getIn(["ui","firstDeployModal","data"]);return h.setIn(["ui","firstDeployModal"],{show:rt,data:ct});case a:return h.setIn(["ui","sitesNavList",H.accountSlug],H.data);default:return h}},o=h=>H=>{H((0,f.gx)(h)),H((0,I.Kq)())},u=({ui:h})=>h.getIn(["ui","a11yMessage"]),n=({ui:h})=>h.getIn(["ui","loading"]),e=({ui:h})=>h.getIn(["ui","routePath"]),d=({ui:h})=>h.getIn(["ui","displayGuidedOnboarding"]);function c({ui:h},H){return h.getIn(["ui","sitesNavList",H])||(0,i.fromJS)([])}const s=h=>({type:m,message:h}),_=h=>({type:p,loading:h}),g=h=>({type:E,routePath:h}),O=h=>({type:S,displayGuidedOnboarding:h}),L=h=>({type:r,show:!0,data:h}),J=()=>({type:r,show:!1}),K=({data:h,accountSlug:H})=>({type:a,data:h,accountSlug:H});function M(h,H){return(0,P.p5)((rt,ct,gt)=>{const Ot=ct(),x=c(Ot,h),tt=(0,y.lH)(Ot,H,!1);if(!x||x.isEmpty()||tt&&!x.find(_t=>(_t==null?void 0:_t.get("name"))===(tt==null?void 0:tt.get("name"))))return gt.sites({accountSlug:h}).then(_t=>rt(K({data:(0,i.fromJS)(_t.data),accountSlug:h}))).catch(()=>rt(K((0,i.fromJS)([]))))})}},36083:(ft,z,t)=>{t.d(z,{q6:()=>I});var i=t(90046),F=t.n(i),f=t(18643);const P="UPLOAD_LOG",y=(0,f.Z)(P,(p,E)=>({deploy_id:p,log:E,ts:new Date().getTime()}));function I(p=(0,i.Map)(),E){switch(E.type){case P:{const{deploy_id:S,ts:r,log:a}=E.payload,l=p.get(S)||(0,i.List)();return p.setIn([S],l.push((0,i.Map)({ts:r,log:a})))}default:return p}}function m(p,E){return p.uploads.get(E)}},12648:(ft,z,t)=>{t.d(z,{Pn:()=>c,aV:()=>_,bF:()=>d,ot:()=>s});var i=t(90046),F=t(18643),f=t(7857),P=t(35037);const y="USER_ANALYTICS_METRIC_SUCCESS",I="USER_ANALYTICS_METRIC_FETCHING_DONE",m="USER_ANALYTICS_METRIC_FETCHING_STARTED",p={CLS:"CLS",FID:"FID",FCP:"FCP",LCP:"LCP"},E={resolution:"hour",days:7};let S=7;const r=(0,F.Z)(y,(g,O,L,{data:J})=>({metric:g,siteId:O.get("id"),period:L,data:J})),a=(0,F.Z)(I,(g,O)=>({metric:g,siteId:O.get("id")})),l=(0,F.Z)(m,(g,O)=>({metric:g,siteId:O.get("id")}));let o;function u(g){return(O,L)=>{const{config:J}=L();return o=o||new P.ZP(J),g(O,L,o)}}function n(g="day",O=30){const L=new Date;return{from:(0,f.b7)((0,f.YD)(L,O)).getTime(),to:L.getTime(),resolution:g}}function e(g="day",O=7){return{period:n(g,O),periodByRange:n("range",O)}}function d(g,O,{resolution:L,days:J}=E,K=""){const{period:M}=e(L,J);return S=J,u((h,H,rt)=>Promise.all([h(l(O,g)),rt.realUserMetric(g.get("id"),O,K,M).then(ct=>h(r(O,g,M,ct)))]).then(()=>h(a(O,g))))}function c(g,O,L){return g.realUserMetrics.get(`${O.get("id")}-${L}`)&&g.realUserMetrics.get(`${O.get("id")}-${L}`).toJS()}function s(){return S}const _=(g=(0,i.Map)(),O)=>{switch(O.type){case m:return g.setIn([`${O.payload.siteId}-${O.payload.metric}`,"isFetching"],!0);case y:return g.set(`${O.payload.siteId}-${O.payload.metric}`,(0,i.fromJS)({data:O.payload.data,timePeriod:{from:O.payload.period.from,to:O.payload.period.to},status:"current"}));case I:return g.setIn([`${O.payload.siteId}-${O.payload.metric}`,"isFetching"],!1);default:return g}}}}]);})();
